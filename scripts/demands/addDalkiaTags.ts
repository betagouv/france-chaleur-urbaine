import base from 'src/db/airtable';
import { Airtable } from 'src/types/enum/Airtable';

interface allTagsFormat {
  [index: string]: any;
}
const allTags: allTagsFormat = {
  '0105C': 'Dalkia_0105C',
  '0106C': 'Dalkia_0106C',
  '0205C': 'Dalkia_0205C',
  '0302C': 'Dalkia_0302C',
  '0307C': 'Dalkia_0307C',
  '0406C': 'Dalkia_0406C',
  '0602C': 'Dalkia_0602C',
  '0603C': 'Dalkia_0603C',
  '0608C': 'Dalkia_0608C',
  '0609C': 'Dalkia_0609C',
  '0702C': 'Dalkia_0702C',
  '0802C': 'Dalkia_0802C',
  '0803C': 'Dalkia_0803C',
  '0806C': 'Dalkia_0806C',
  '1101C': 'Dalkia_1101C',
  '1311C': 'Dalkia_1311C',
  '1315C': 'Dalkia_1315C',
  '1322C': 'Dalkia_1322C',
  '1402C': 'Dalkia_1402C',
  '1403C': 'Dalkia_1403C',
  '1405C': 'Dalkia_1405C',
  '1406C': 'Dalkia_1406C',
  '1413C': 'Dalkia_1413C',
  '1702C': 'Dalkia_1702C',
  '1703C': 'Dalkia_1703C',
  '1704C': 'Dalkia_1704C',
  '1705C': 'Dalkia_1705C',
  '1903C': 'Dalkia_1903C',
  '1909C': 'Dalkia_1909C',
  '2106C': 'Dalkia_2106C',
  '2502C': 'Dalkia_2502C',
  '2604C': 'Dalkia_2604C',
  '2701C': 'Dalkia_2701C',
  '2702C': 'Dalkia_2702C',
  '2703C': 'Dalkia_2703C',
  '2705C': 'Dalkia_2705C',
  '2802C': 'Dalkia_2802C',
  '3001C': 'Dalkia_3001C',
  '3002C': 'Dalkia_3002C',
  '3106C': 'Dalkia_3106C',
  '3112C': 'Dalkia_3112C',
  '3304C': 'Dalkia_3304C',
  '3315C': 'Dalkia_3315C',
  '3412C': 'Dalkia_3412C',
  '3605C': 'Dalkia_3605C',
  '3702C': 'Dalkia_3702C',
  '3803C': 'Dalkia_3803C',
  '3806C': 'Dalkia_3806C',
  '3813C': 'Dalkia_3813C',
  '3814C': 'Dalkia_3814C',
  '4102C': 'Dalkia_4102C',
  '4106C': 'Dalkia_4106C',
  '4202C': 'Dalkia_4202C',
  '4204C': 'Dalkia_4204C',
  '4207C': 'Dalkia_4207C',
  '4208C': 'Dalkia_4208C',
  '4210C': 'Dalkia_4210C',
  '4214C': 'Dalkia_4214C',
  '4405C': 'Dalkia_4405C',
  '4501C': 'Dalkia_4501C',
  '4504C': 'Dalkia_4504C',
  '4505C': 'Dalkia_4505C',
  '4507C': 'Dalkia_4507C',
  '4802C': 'Dalkia_4802C',
  '4902C': 'Dalkia_4902C',
  '5002C': 'Dalkia_5002C',
  '5101C': 'Dalkia_5101C',
  '5103C': 'Dalkia_5103C',
  '5108C': 'Dalkia_5108C',
  '5401C': 'Dalkia_5401C',
  '5403C': 'Dalkia_5403C',
  '5407C': 'Dalkia_5407C',
  '5410C': 'Dalkia_5410C',
  '5411C': 'Dalkia_5411C',
  '5413C': 'Dalkia_5413C',
  '5414C': 'Dalkia_5414C',
  '5502C': 'Dalkia_5502C',
  '5503C': 'Dalkia_5503C',
  '5601C': 'Dalkia_5601C',
  '5706C': 'Dalkia_5706C',
  '5707C': 'Dalkia_5707C',
  '5802C': 'Dalkia_5802C',
  '5803C': 'Dalkia_5803C',
  '5901C': 'Dalkia_5901C',
  '5904C': 'Dalkia_5904C',
  '5905C': 'Dalkia_5905C',
  '5906C': 'Dalkia_5906C',
  '5907C': 'Dalkia_5907C',
  '5908C': 'Dalkia_5908C',
  '5909C': 'Dalkia_5909C',
  '5910C': 'Dalkia_5910C',
  '5912C': 'Dalkia_5912C',
  '5914C': 'Dalkia_5914C',
  '5916C': 'Dalkia_5916C',
  '5917C': 'Dalkia_5917C',
  '5922C': 'Dalkia_5922C',
  '6002C': 'Dalkia_6002C',
  '6003C': 'Dalkia_6003C',
  '6004C': 'Dalkia_6004C',
  '6006C': 'Dalkia_6006C',
  '6103C': 'Dalkia_6103C',
  '6104C': 'Dalkia_6104C',
  '6109C': 'Dalkia_6109C',
  '6201C': 'Dalkia_6201C',
  '6203C': 'Dalkia_6203C',
  '6204C': 'Dalkia_6204C',
  '6206C': 'Dalkia_6206C',
  '6209C': 'Dalkia_6209C',
  '6210C': 'Dalkia_6210C',
  '6211C': 'Dalkia_6211C',
  '6212C': 'Dalkia_6212C',
  '6304C': 'Dalkia_6304C',
  '6306C': 'Dalkia_6306C',
  '6307C': 'Dalkia_6307C',
  '6402C': 'Dalkia_6402C',
  '6501C': 'Dalkia_6501C',
  '6604C': 'Dalkia_6604C',
  '6901C': 'Dalkia_6901C',
  '6904C': 'Dalkia_6904C',
  '6905C': 'Dalkia_6905C',
  '6906C': 'Dalkia_6906C',
  '6915C': 'Dalkia_6915C',
  '6918C': 'Dalkia_6918C',
  '7104C': 'Dalkia_7104C',
  '7318C': 'Dalkia_7318C',
  '7319C': 'Dalkia_7319C',
  '7402C': 'Dalkia_7402C',
  '7407C': 'Dalkia_7407C',
  '7408C': 'Dalkia_7408C',
  '7410C': 'Dalkia_7410C',
  '7411C': 'Dalkia_7411C',
  '7412C': 'Dalkia_7412C',
  '7423C': 'Dalkia_7423C',
  '7601C': 'Dalkia_7601C',
  '7603C': 'Dalkia_7603C',
  '7606C': 'Dalkia_7606C',
  '7609C': 'Dalkia_7609C',
  '7612C': 'Dalkia_7612C',
  '7613C': 'Dalkia_7613C',
  '7614C': 'Dalkia_7614C',
  '7703C': 'Dalkia_7703C',
  '7705C': 'Dalkia_7705C',
  '7707C': 'Dalkia_7707C',
  '7710C': 'Dalkia_7710C',
  '7711C': 'Dalkia_7711C',
  '7716C': 'Dalkia_7716C',
  '7721C': 'Dalkia_7721C',
  '7802C': 'Dalkia_7802C',
  '7805C': 'Dalkia_7805C',
  '7807C': 'Dalkia_7807C',
  '7812C': 'Dalkia_7812C',
  '7816C': 'Dalkia_7816C',
  '7901C': 'Dalkia_7901C',
  '8005C': 'Dalkia_8005C',
  '8102C': 'Dalkia_8102C',
  '8307C': 'Dalkia_8307C',
  '8401C': 'Dalkia_8401C',
  '8502C': 'Dalkia_8502C',
  '8601C': 'Dalkia_8601C',
  '8607C': 'Dalkia_8607C',
  '8701C': 'Dalkia_8701C',
  '8702C': 'Dalkia_8702C',
  '8802C': 'Dalkia_8802C',
  '9002C': 'Dalkia_9002C',
  '9102C': 'Dalkia_9102C',
  '9103C': 'Dalkia_9103C',
  '9119C': 'Dalkia_9119C',
  '9120C': 'Dalkia_9120C',
  '9121C': 'Dalkia_9121C',
  '9125C': 'Dalkia_9125C',
  '9222C': 'Dalkia_9222C',
  '9224C': 'Dalkia_9224C',
  '9230C': 'Dalkia_9230C',
  '9233C': 'Dalkia_9233C',
  '9234C': 'Dalkia_9234C',
  '9236C': 'Dalkia_9236C',
  '9309C': 'Dalkia_9309C',
  '9311C': 'Dalkia_9311C',
  '9317C': 'Dalkia_9317C',
  '9402C': 'Dalkia_9402C',
  '9410C': 'Dalkia_9410C',
  '9424C': 'Dalkia_9424C',
  '9430C': 'Dalkia_9430C',
  '9502C': 'Dalkia_9502C',
  '9509C': 'Dalkia_9509C',
  '9516C': 'Dalkia_9516C',
  '9518C': 'Dalkia_9518C',
  '9520C': 'Dalkia_9520C',
};

const updateDemands = async () => {
  try {
    const demands = await base(Airtable.UTILISATEURS).select().all();
    await Promise.all(
      demands
        .filter(
          (demand: any) =>
            demand.get('Gestionnaires') &&
            demand.get('Gestionnaires').includes('Dalkia')
        )
        .map(async (demand) => {
          const network: string = demand.get('Identifiant r√©seau') as string;
          if (network) {
            const newTag = allTags[network];
            if (newTag) {
              const gestionnaires = demand.get('Gestionnaires') as [string];
              if (gestionnaires) {
                gestionnaires.push(newTag);
                await base(Airtable.UTILISATEURS).update(
                  demand.id,
                  {
                    Gestionnaires: gestionnaires,
                  },
                  { typecast: true }
                );
              }
            }
          }
        })
    );
  } catch (e) {
    console.error(e);
  }
  process.exit(0);
};

updateDemands();
