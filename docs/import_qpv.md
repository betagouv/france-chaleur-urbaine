# Potentiels de raccordement par territoire

Données récupérés depuis le [ticket trello](https://trello.com/c/VaOCHF4j/1421-ajouter-couche-qpv)

## QPV 2015 ANRU

Prérequis : posséder QP_METROPOLE_LB93.shp + autres fichiers

```sh
ogr2ogr -f "GeoJSON" QP_METROPOLE_LB93_4326.geojson QP_METROPOLE_LB93.shp -t_srs EPSG:4326

# transformation des données pour correspondre au format 2024 + filtrage des ids ANRU (extraits manuellement de l'excel)
jq --argjson ids '["QP001001","QP001005","QP001006","QP001007","QP002001","QP002004","QP002012","QP002017","QP003001","QP003004","QP004003","QP005001","QP006003","QP006005","QP006010","QP006013","QP006014","QP007002","QP008008","QP009002","QP009003","QP010003","QP010007","QP011007","QP013011","QP013013","QP013016","QP013018","QP013021","QP013024","QP013025","QP013029","QP013032","QP013038","QP013042","QP013044","QP013049","QP013051","QP013053","QP013055","QP013056","QP013058","QP013063","QP014001","QP014008","QP014009","QP015001","QP016003","QP016004","QP017002","QP018001","QP018004","QP019001","QP021002","QP021003","QP022003","QP022005","QP023001","QP024004","QP025002","QP025004","QP025011","QP025012","QP026001","QP026005","QP026006","QP026007","QP027004","QP027007","QP027008","QP027010","QP028002","QP028005","QP028006","QP029002","QP029004","QP029008","QP02A001","QP02B001","QP030001","QP030003","QP030005","QP030006","QP030010","QP030015","QP031001","QP031005","QP031007","QP031010","QP031011","QP032001","QP033007","QP033009","QP033012","QP033016","QP034001","QP034003","QP034005","QP034008","QP034017","QP034019","QP034021","QP035001","QP035002","QP035004","QP035005","QP036001","QP036002","QP036004","QP037002","QP037004","QP037009","QP037010","QP038003","QP038006","QP038007","QP038011","QP038012","QP038014","QP038015","QP038024","QP039001","QP040004","QP040005","QP041001","QP041003","QP042008","QP042009","QP042011","QP042012","QP042013","QP042015","QP043001","QP044001","QP044002","QP044003","QP044005","QP044006","QP044008","QP044009","QP044014","QP044016","QP045001","QP045010","QP045011","QP045017","QP047006","QP049001","QP049005","QP049011","QP049013","QP050007","QP051002","QP051003","QP051004","QP051005","QP051006","QP051010","QP052001","QP052004","QP053002","QP053003","QP054003","QP054004","QP054013","QP054015","QP054016","QP056003","QP056004","QP056006","QP057002","QP057003","QP057004","QP057007","QP057012","QP057018","QP057020","QP057022","QP057023","QP057024","QP058002","QP059005","QP059009","QP059014","QP059015","QP059016","QP059017","QP059019","QP059021","QP059024","QP059030","QP059031","QP059044","QP059050","QP059061","QP059062","QP059064","QP059065","QP059071","QP059073","QP059074","QP059077","QP059080","QP059082","QP059087","QP059089","QP059090","QP060001","QP060002","QP060007","QP060008","QP060010","QP060011","QP060012","QP060013","QP060017","QP061002","QP061003","QP061005","QP062008","QP062011","QP062019","QP062024","QP062028","QP062037","QP062044","QP062051","QP062053","QP062055","QP062056","QP062061","QP062064","QP063002","QP063003","QP063004","QP063007","QP064003","QP065003","QP065004","QP066005","QP066008","QP066010","QP067004","QP067006","QP067007","QP067011","QP067013","QP067014","QP067016","QP068001","QP068003","QP068005","QP068006","QP068008","QP068009","QP068010","QP069004","QP069008","QP069010","QP069011","QP069012","QP069015","QP069016","QP069018","QP069023","QP069024","QP069028","QP069029","QP069035","QP069036","QP069037","QP070001","QP071004","QP071010","QP072002","QP072003","QP072004","QP072005","QP073002","QP073003","QP073004","QP074001","QP074003","QP074006","QP075010","QP075012","QP075013","QP075014","QP075019","QP076002","QP076006","QP076011","QP076012","QP076013","QP076014","QP076019","QP076020","QP076021","QP076022","QP076023","QP077005","QP077006","QP077010","QP077013","QP077014","QP077022","QP077023","QP078001","QP078006","QP078008","QP078011","QP078013","QP078015","QP078017","QP078021","QP079003","QP080001","QP080002","QP080003","QP080007","QP081002","QP081006","QP082002","QP083009","QP083016","QP084002","QP084003","QP084004","QP084012","QP084020","QP085002","QP085004","QP086001","QP086005","QP087004","QP087005","QP087006","QP088001","QP089002","QP089003","QP089005","QP089006","QP090004","QP091002","QP091011","QP091012","QP091014","QP091016","QP091017","QP091021","QP091025","QP091026","QP091027","QP091030","QP091033","QP091034","QP091037","QP092005","QP092006","QP092007","QP092012","QP092013","QP092015","QP092016","QP092019","QP092020","QP093003","QP093009","QP093011","QP093012","QP093013","QP093014","QP093018","QP093020","QP093021","QP093023","QP093024","QP093027","QP093028","QP093029","QP093030","QP093031","QP093034","QP093036","QP093039","QP093040","QP093044","QP093045","QP093046","QP093048","QP093049","QP093050","QP093051","QP093052","QP093053","QP093054","QP093055","QP093058","QP094003","QP094004","QP094005","QP094008","QP094012","QP094013","QP094015","QP094018","QP094021","QP094023","QP094027","QP094031","QP094032","QP094035","QP094038","QP095004","QP095011","QP095015","QP095027","QP095032","QP095033","QP095034","QP095036","QP095038","QP971002","QP971003","QP971004","QP972001","QP972002","QP972003","QP973007","QP973008","QP973009","QP973010","QP973012","QP973021","QP973027","QP973028","QP974001","QP974009","QP974018","QP974021","QP974025","QP974027","QP974028","QP974029","QP976017","QP976020","QP976023","QP976032"]' '
  .features |= map(
    select(.properties.CODE_QP | IN($ids[]))
    | .properties = {
        code_quartier: .properties.CODE_QP,
        nom_quartier: .properties.NOM_QP,
        is2015: true
      }
  )
' QP_METROPOLE_LB93_4326.geojson > QP_METROPOLE_LB93_4326_final.geojson
cat QP_METROPOLE_LB93_4326_final.geojson | docker run -i --rm --entrypoint /bin/bash naxgrp/tippecanoe -c "tippecanoe-json-tool" | docker run -i --rm -v $PWD:/volume -w /volume --user $(id -u):$(id -g) --entrypoint /bin/bash naxgrp/tippecanoe -c "tippecanoe -e quartiers_prioritaires_politique_ville_2015_anru_tiles --read-parallel --layer=layer --force --generate-ids --minimum-zoom=5 --maximum-zoom=14"

yarn cli import-mvt-directory quartiers_prioritaires_politique_ville_2015_anru_tiles quartiers_prioritaires_politique_ville_2015_anru_tiles

./scripts/copyLocalTableToRemote.sh dev quartiers_prioritaires_politique_ville_2015_anru_tiles
```

## QPV 2024

Prérequis : posséder qp-2024-epsg2154-20240820.geojson

```sh
ogr2ogr -f "GeoJSON" qp-2024-epsg2154-20240820_4326.geojson qp-2024-epsg2154-20240820.geojson -t_srs EPSG:4326

cat qp-2024-epsg2154-20240820_4326.geojson | docker run -i --rm --entrypoint /bin/bash naxgrp/tippecanoe -c "tippecanoe-json-tool" | docker run -i --rm -v $PWD:/volume -w /volume --user $(id -u):$(id -g) --entrypoint /bin/bash naxgrp/tippecanoe -c "tippecanoe -e quartiers_prioritaires_politique_ville_2024_tiles --read-parallel --layer=layer --force --generate-ids --minimum-zoom=5 --maximum-zoom=14"

yarn cli import-mvt-directory quartiers_prioritaires_politique_ville_2024_tiles quartiers_prioritaires_politique_ville_2024_tiles

./scripts/copyLocalTableToRemote.sh dev quartiers_prioritaires_politique_ville_2024_tiles
```
