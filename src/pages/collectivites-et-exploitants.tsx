import Image from 'next/image';
import { useState } from 'react';

import { CampagneAfficheImage, FeatureLink, FullWidthImage } from '@/components/CollectivitesExploitantsPage.style';
import IframeIntegration from '@/components/GenericContent/IframeIntegration';
import { RoutedLink } from '@/components/MarkdownWrapper/MarkdownWrapper';
import { ArrowPuce } from '@/components/MarkdownWrapper/MarkdownWrapper.style';
import NetworkSearchInput from '@/components/Network/NetworkSearchInput';
import Newsletter from '@/components/Newsletter/Newsletter';
import Partners from '@/components/Partners/Partners';
import { growths, issues } from '@/components/Ressources/config';
import Understanding from '@/components/Ressources/Understanding';
import SimplePage from '@/components/shared/page/SimplePage';
import Box, { ResponsiveRow } from '@/components/ui/Box';
import Heading from '@/components/ui/Heading';
import Hero, { HeroContent, HeroSubtitle, HeroTitle } from '@/components/ui/Hero';
import Link from '@/components/ui/Link';
import Text from '@/components/ui/Text';
import statistics from '@/data/statistics';

import { type NetworkSearchResult } from './api/networks/search';

const collectivitesCards = {
  role: issues.role,
  livraisons: issues.livraisons,
  etat: growths.etat,
};

function CollectivitesEtExploitantsPage() {
  const [networkSearchTerm, setNetworkSearchTerm] = useState('');
  const [selectedNetwork, setSelectedNetwork] = useState<NetworkSearchResult | null>(null);
  return (
    <SimplePage
      title="Collectivités, développez votre réseau de chaleur"
      description="Identifiez son potentiel de développement sur notre carte, découvrez nos outils et services pour faire connaître votre réseau, multipliez les raccordements."
    >
      <Hero image="/img/collectivite_header.webp" variant="light" imageType="inline">
        <HeroTitle>Valorisons les réseaux de chaleur, levier de la transition énergétique</HeroTitle>
        <HeroSubtitle>France Chaleur Urbaine, une plateforme collaborative pour accélérer les raccordements</HeroSubtitle>
        <HeroContent>
          <div className="flex gap-2 items-center justify-start">
            <Link variant="primary" href="#beneficier-du-service">
              Bénéficier du service
            </Link>
            <Link variant="secondary" href="/carte">
              Voir la cartographie
            </Link>
          </div>
        </HeroContent>
      </Hero>

      <Box py="10w">
        <Box className="fr-container">
          <Heading as="h2" center>
            France Chaleur Urbaine c’est&nbsp;:
          </Heading>
          <ResponsiveRow mt="8w">
            <Box flex>
              <Heading as="h3" color="blue-france">
                La cartographie interactive des réseaux de chaleur et de froid la plus complète à l’échelle nationale
              </Heading>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  {statistics.networks} tracés en open data, représentant {statistics.heatPercent}% de la chaleur livrée annuellement par
                  les réseaux en France
                </Text>
              </ArrowPuce>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  Des données techniques et économiques par réseau, l’identification des réseaux classés et leurs périmètres de
                  développement prioritaire, les tracés de réseaux en construction
                </Text>
              </ArrowPuce>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  Des données sur les potentiels de raccordement à l’adresse : bâtiments chauffés au gaz ou fioul collectif, consommations
                  de gaz...
                </Text>
              </ArrowPuce>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  De nombreuses fonctionnalités pour les professionnels
                </Text>
              </ArrowPuce>
            </Box>

            <Box flex>
              <Heading as="h3" color="blue-france">
                Un service gratuit au service de tous les acteurs de la filière des réseaux de chaleur
              </Heading>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  Un ensemble d’accompagnements personnalisés pour les collectivités, les exploitants et les professionnels
                </Text>
              </ArrowPuce>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  Un contenu riche pour informer le grand public
                </Text>
              </ArrowPuce>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  Des infographies et des vidéos pédagogiques
                </Text>
              </ArrowPuce>
              <ArrowPuce>
                <Text size="lg" color="grey">
                  Des simulateurs (émissions de CO2 évitées et montant du «&nbsp;Coup de pouce chauffage des bâtiments résidentiels
                  collectifs et tertiaires&nbsp;»)
                </Text>
              </ArrowPuce>
            </Box>
          </ResponsiveRow>
        </Box>
      </Box>

      <Box py="10w" backgroundColor="blue-france-975-75" id="beneficier-du-service">
        <Box className="fr-container">
          <Heading as="h2" center>
            Vous êtes une collectivité ou un exploitant <br />
            France Chaleur Urbaine vous permet de&nbsp;:
          </Heading>
          <ResponsiveRow mt="8w">
            <Box flex>
              <Image src="/img/collectivite_picto_1.webp" alt="" width="270" height="232" priority className="d-block img-object-contain" />
              <FeatureLink href="#communiquer" className="fr-mb-1w fr-mt-3w">
                Communiquer
              </FeatureLink>
              <Text size="lg">
                Vous cherchez à faire connaître votre réseau et les avantages du chauffage urbain, encore mal connu&nbsp;?
              </Text>
            </Box>

            <Box flex>
              <Image src="/img/collectivite_picto_2.webp" alt="" width="270" height="232" priority className="d-block img-object-contain" />
              <FeatureLink href="#prospecter" className="fr-mb-1w fr-mt-3w">
                Prospecter
              </FeatureLink>
              <Text size="lg">
                Vous voulez accélérer les raccordements à un réseau et connaître toutes les demandes déposées sur notre plateforme&nbsp;?
              </Text>
            </Box>

            <Box flex>
              <Image src="/img/collectivite_picto_3.webp" alt="" width="270" height="232" priority className="d-block img-object-contain" />
              <FeatureLink href="#developper" className="fr-mb-1w fr-mt-3w">
                Développer
              </FeatureLink>
              <Text size="lg">
                Vous souhaitez développer vos réseaux et avoir une vision à long terme des potentiels sur votre territoire&nbsp;?
              </Text>
            </Box>
          </ResponsiveRow>
          <ResponsiveRow breakpoint="xs" justifyContent="center" gap="32px" mt="8w">
            <Link
              variant="primary"
              href="documentation/FCU_guide_collectivites.pdf"
              eventKey="Téléchargement|Guide Collectivités|Collectivités et exploitants"
              isExternal
            >
              Notre guide collectivité
            </Link>
            <Link
              variant="primary"
              href="documentation/FCU_guide_exploitants.pdf"
              eventKey="Téléchargement|Guide Exploitants|Collectivités et exploitants"
              isExternal
            >
              Notre guide exploitant
            </Link>
          </ResponsiveRow>
        </Box>
      </Box>

      <Box pt="10w" pb="16w" id="communiquer">
        <Box className="fr-container">
          <Heading as="h2" center color="blue-france">
            Communiquer
          </Heading>
          <Text size="xl" fontWeight="bold" mx="auto" textAlign="center" mt="2w" maxWidth="80w">
            France Chaleur Urbaine vous aide à faire la promotion du chauffage urbain et à rendre votre réseau plus visible en ligne et dans
            votre ville
          </Text>
        </Box>
      </Box>

      <Box py="10w" backgroundColor="blue-france-main-525" id="communiquer">
        <ResponsiveRow className="fr-container" textColor="white">
          <Box flex>
            <Text size="xl" fontWeight="bold">
              Comme Charleville-Mézières, Fresnes ou Evos à Strasbourg, menez une campagne d’affichage ou communiquez pendant les travaux
            </Text>
            <Text size="lg" mt="3w">
              Rendez visibles vos réseaux de chaleur via des campagnes d’affichage en ville&nbsp;! Les phases de travaux constituent aussi
              des moments clés pour faire connaître les réseaux&nbsp;: nous vous accompagnons dans cette communication.
            </Text>

            <Link variant="primary" href="/ressources/actions-de-communication" mt="4w">
              Voir l’offre d’accompagement de campagne
            </Link>
          </Box>
          <Box flex>
            <CampagneAfficheImage src="/img/collectivite-campagne-affiches.png" alt="" />
          </Box>
        </ResponsiveRow>
      </Box>

      <Box pt="16w" pb="10w">
        <ResponsiveRow className="fr-container">
          <Box flex>
            <Heading as="h4" color="blue-france">
              Diffusez nos supports pédagogiques
            </Heading>
            <Text size="lg">
              De nombreux documents à partager sur les réseaux sociaux, sur votre site internet et en mairie (infographies, visuels pour
              réseaux sociaux, vidéos, article type...). Vous souhaitez personnaliser ces supports avec votre logo&nbsp;? Il suffit pour
              cela de nous contacter.
            </Text>

            <Link variant="primary" href="/ressources/supports#contenu" mt="3w">
              Voir tous nos supports
            </Link>
          </Box>
          <Box flex>
            <FullWidthImage src="/img/collectivite-supports.jpg" alt="" />
          </Box>
        </ResponsiveRow>

        <ResponsiveRow className="fr-container" mt="10w">
          <Box flex>
            <Heading as="h4" color="blue-france">
              Faites apparaître les données de votre réseau sur la cartographie France Chaleur Urbaine (tracé, projets d'extension,
              périmètre de développement prioritaire...)
            </Heading>
            <Text size="lg">
              Les copropriétaires et les gestionnaires d’établissements tertiaires de votre territoire pourront ainsi vérifier si un
              raccordement de leur bâtiment est envisageable.
            </Text>

            <Link variant="primary" href="/contribution" mt="3w">
              Communiquer les données de mon réseau
            </Link>
            <Text size="lg" mt="3w">
              Vous pouvez ajouter des informations ou des précisions (capacité de raccordement, schéma directeur, évolution à venir, ...)
              sur la fiche de votre réseau.
            </Text>

            <Box display="flex" mt="3w">
              <NetworkSearchInput
                className={selectedNetwork ? '' : 'fr-col'} // expand the text input only
                label={
                  <Text mt="2w" legacyColor="darkerblue">
                    Voir la fiche actuelle de votre réseau
                  </Text>
                }
                value={networkSearchTerm}
                onChange={(value) => {
                  setNetworkSearchTerm(value);
                  setSelectedNetwork(null); // hide the link
                }}
                selectedNetwork={selectedNetwork}
                onNetworkSelect={(network) => {
                  setSelectedNetwork(network);
                }}
              />
              {selectedNetwork && (
                <Link
                  href={`/reseaux/${selectedNetwork['Identifiant reseau']}`}
                  isExternal
                  mt="4w"
                  ml="2w"
                  className="fr-col--middle" // vertical alignment
                >
                  Voir la fiche
                </Link>
              )}
            </Box>

            <Link
              variant="primary"
              href={`/reseaux/modifier${selectedNetwork ? `?reseau=${selectedNetwork['Identifiant reseau']}` : ''}`}
              mt="3w"
            >
              Compléter la fiche {selectedNetwork ? 'du' : 'd’un'} réseau
            </Link>
          </Box>
          <Box flex>
            <FullWidthImage src="/img/collectivite-carto.jpg" alt="" />
          </Box>
        </ResponsiveRow>
      </Box>

      <Box py="10w">
        <IframeIntegration />
      </Box>

      <Box py="10w" backgroundColor="blue-france-975-75" id="prospecter">
        <Box className="fr-container">
          <Heading as="h2" center color="blue-france">
            Prospecter
          </Heading>
          <Text size="xl" fontWeight="bold" mx="auto" textAlign="center" mt="2w" maxWidth="80w">
            France Chaleur Urbaine vous permet de découvrir les manifestions d’intérêt sur votre territoire ainsi que les demandes de
            contact déposées sur notre site.
          </Text>
          <ResponsiveRow mt="10w">
            <Box flex>
              <Heading as="h4" color="blue-france">
                Identifiez les zones où une appétence se dénote
              </Heading>
              <Text size="lg">Toutes les demandes effectuées sur notre site apparaissent directement sur notre cartographie</Text>
            </Box>
            <Box flex>
              <FullWidthImage src="/img/collectivite-prospecter-1.jpg" alt="" />
            </Box>
          </ResponsiveRow>

          <ResponsiveRow mt="10w">
            <Box flex>
              <Heading as="h4" color="blue-france">
                Profitez de notre « espace gestionnaire » ouvert aux exploitants et collectivités
              </Heading>
              <Text size="lg">
                Découvrez qui souhaiterait se raccorder sur votre territoire en récupérant simplement les coordonnées des prospects
                raccordables.
                <br />
                Retrouvez l’ensemble des demandes reçues sur notre site près de votre/vos réseaux, dans un espace ergonomique partagé entre
                exploitants et autorité délégante, facile à prendre en main.
              </Text>
            </Box>
            <Box flex>
              <FullWidthImage src="/img/collectivite-prospecter-2.jpg" alt="" />
            </Box>
          </ResponsiveRow>
        </Box>
      </Box>

      <Box py="10w" id="developper">
        <Box className="fr-container">
          <Heading as="h2" center color="blue-france">
            Développer
          </Heading>
          <Text size="xl" fontWeight="bold" mx="auto" textAlign="center" mt="2w" maxWidth="80w">
            Découvrez toutes les fonctionnalités de la cartographie pour vos actions de prospection et prospective.
          </Text>

          <ResponsiveRow mt="10w">
            <Box flex>
              <FullWidthImage src="/img/collectivite-developper-1.jpg" alt="" width="80%" />
              <Heading as="h4" color="blue-france" mt="4w">
                Identifiez les principaux consommateurs de gaz sur votre territoire
              </Heading>
              <Text size="lg">
                Consommations de gaz à l’adresse, issues des données locales de l’énergie : une première donnée pour envisager la création
                d’un réseau de chaleur et identifier facilement les bâtiments gros consommateurs de gaz.
              </Text>
            </Box>

            <Box flex>
              <FullWidthImage src="/img/collectivite-developper-2.jpg" alt="" width="80%" />
              <Heading as="h4" color="blue-france" mt="4w">
                Localisez les bâtiments à chauffage collectif gaz ou fioul potentiellement raccordables
              </Heading>
              <Text size="lg">
                En complément des consommations de gaz, il peut être utile d’étudier les données bâtimentaires issues de la base de données
                nationale des bâtiments. Les données sont filtrables selon le nombre de lots d’habitation.
              </Text>
            </Box>
          </ResponsiveRow>

          <ResponsiveRow mt="10w">
            <Box flex>
              <FullWidthImage src="/img/collectivite-developper-3.jpg" alt="" width="80%" />
              <Heading as="h4" color="blue-france" mt="4w">
                Exportez la totalité des informations sur une zone précise
              </Heading>
              <Text size="lg">
                Définissez facilement une zone et obtenez les valeurs agrégées des consommations de gaz, adresses des bâtiments chauffés au
                gaz ou fioul collectif,... Et obtenez la liste des bâtiments par adresse postale pour prospecter efficacement.
                <br />
                Le nombre de lots par bâtiment est également indiqué dans l’export.
              </Text>
            </Box>

            <Box flex>
              <FullWidthImage src="/img/collectivite-developper-4.jpg" alt="" width="80%" />
              <Heading as="h4" color="blue-france" mt="4w">
                Définissez un projet de tracé de réseau
              </Heading>
              <Text size="lg">
                La longueur du tracé prévisionnel et la densité thermique linéaire associée, sur la base des consommations de gaz à
                l’adresse, sont automatiquement calculées. Estimez ainsi le potentiel de création de futurs réseaux ou d’extensions de
                réseaux en quelques clics.
                <br />
                L’ADEME retient comme critère de densité énergétique minimale 1,5&nbsp;MWh par mètre linéaire de réseau.
              </Text>
            </Box>
          </ResponsiveRow>
        </Box>
      </Box>

      <Box py="10w" backgroundColor="blue-france-main-525" id="newsletter">
        <Box className="fr-container">
          <ResponsiveRow>
            <Heading as="h5" mt="2w" legacyColor="white">
              Inscrivez-vous à notre newsletter pour recevoir toutes nos dernières infos
            </Heading>
            <Newsletter />
          </ResponsiveRow>
        </Box>
      </Box>

      <Box py="10w" backgroundColor="blue-france-975-75" id="articles">
        <Box className="fr-container">
          <Heading as="h2" center>
            Nos articles sur le chauffage urbain
          </Heading>
          <Box className="fr-grid-row" mt="10w">
            <Understanding cards={collectivitesCards} />
          </Box>
        </Box>
      </Box>

      <Partners />

      <Box py="10w" backgroundColor="blue-france-main-525" textColor="#fff">
        <Box className="fr-container">
          <Heading as="h5" legacyColor="white">
            Le chauffage urbain, un levier pour la transition énergétique
          </Heading>
          <Text mt="1w">Accélérons le développement des réseaux de chaleur</Text>
          <Text mt="3w">
            Le chauffage urbain, majoritairement mis en place à l’initiative des collectivités, permet de mobiliser des{' '}
            <Link href="/ressources/energies-vertes#contenu">sources d’énergie locales et renouvelables faiblement carbonées</Link>.
          </Text>
          <Text mt="3w">
            La loi de transition énergétique pour la croissance verte fixe pour{' '}
            <RoutedLink href="/ressources/role#contenu">objectif de multiplier par 5</RoutedLink> les quantités de chaleur livrées par les
            réseaux en 2030, par rapport à 2012. Cela passera par la densification des réseaux de chaleur existants, la création
            d’extensions ou de nouveaux réseaux, et l’augmentation de la part des énergies renouvelables alimentant les réseaux de chaleur.
          </Text>
        </Box>
      </Box>
    </SimplePage>
  );
}

export default CollectivitesEtExploitantsPage;
