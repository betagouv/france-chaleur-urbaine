"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{5477:function(e,t,n){n.d(t,{Bm:function(){return i},UG:function(){return o},ZP:function(){return a},_q:function(){return c},d:function(){return s},M1:function(){return d},Qx:function(){return f},gr:function(){return m}});var r=n(7379),i=function(e){return(null===e||void 0===e?void 0:e.search(/(^http)|(^mailto)/))>=0},o=r.ZP.div.attrs((function(e){var t=e.className;return{className:"md-wrapper ".concat(t||"")}})).withConfig({displayName:"MarkdownWrapperstyle__MarkdownWrapperStyled",componentId:"sc-149dqhq-0"})(["h1,h2{color:#000074;}h3,h4{color:#4550e5;}h5,h6{color:var(--bf500);}h1 + h1,h2 + h2,h3 + h3,h4 + h4,h5 + h5,h6 + h6{margin-top:calc(-1rem + 0.25rem);}p{font-size:inherit;line-height:inherit;margin-bottom:1em;}em{color:#4550e5;font-style:normal;}strong{color:#4550e5;em{color:#293173;font-style:normal;}}"]),a=r.ZP.a.attrs({className:"fr-btn"}).withConfig({displayName:"MarkdownWrapperstyle__ButtonLink",componentId:"sc-149dqhq-1"})([""]),c=r.ZP.div.withConfig({displayName:"MarkdownWrapperstyle__CounterItem",componentId:"sc-149dqhq-2"})(["display:flex;justify-content:center;align-items:center;color:#fff;font-size:1.45rem;padding:1em;margin:0.25em 0 0;width:3.15em;height:3.15em;border-radius:100%;background-color:#4550e5;float:left;margin:-0.4em 0.6em -0.2em 0em;@media (min-width:992px){position:absolute;left:0;margin:0;float:none;}"]),s=r.ZP.p.withConfig({displayName:"MarkdownWrapperstyle__Cartridge",componentId:"sc-149dqhq-3"})(["display:inline-block;background-color:#ffdecf;margin:0 -0.55em;padding:0.35em 0.55em;border-radius:0.7em;& > &{margin:0;}&:not(.surcharge){p,strong,em,h1,h2,h3,h4,h5,h6{color:currentColor;}","}"],(function(e){switch(e.theme){case"color":case"blue":return(0,r.iv)(["background-color:#4550e5;color:#fff;"]);case"yellow":return(0,r.iv)(["background-color:#efc73f;color:#4550e5;"]);case"grey":return(0,r.iv)(["background-color:#f9f8f6;border:1px solid #e7e7e7;color:#4550e5;"])}})),l=(0,r.iv)(["margin-bottom:1.5rem;display:flex;justify-content:flex-start;align-items:flex-start;color:#4550e5;&::before{content:'';display:block;padding-top:0.15rem;margin-right:0.5rem;color:#4550e5;padding:0;line-height:1;background-image:url('./icons/check.svg');background-repeat:no-repeat;background-position:0 0.5em;background-size:1em;padding-left:calc(1em + 0.15em);min-height:calc(1em + 0.75em);}"]),u=r.ZP.div.attrs({className:"fr-fi-checkbox-circle-fill list-item"}).withConfig({displayName:"MarkdownWrapperstyle__CheckItemDefault",componentId:"sc-149dqhq-4"})(["margin-bottom:1.5rem;display:flex;justify-content:flex-start;align-items:flex-start;color:#4550e5;&::before{display:block;padding-top:0.15rem;margin-right:0.5rem;color:#2fab73;padding:0;line-height:1;}"]),d=r.ZP.div.attrs((function(e){var t=e.checked,n=e.className;return{className:t?"fr-fi-checkbox-circle-fill list-item ".concat(n):n}})).withConfig({displayName:"MarkdownWrapperstyle__CheckItem",componentId:"sc-149dqhq-5"})(["",""],(function(e){return e.checked?u:l})),f=r.ZP.div.withConfig({displayName:"MarkdownWrapperstyle__PuceIcon",componentId:"sc-149dqhq-6"})(["background-image:url(",");background-repeat:no-repeat;background-position:0 0.5em;background-size:70px;padding-left:calc(70px + 0.75em);min-height:calc(70px + 1.5em);"],(function(e){return e.icon||""})),m=r.ZP.a.attrs((function(e){var t=e.href;return{className:"fr-fi-arrow-right-s-line list-item",children:"En savoir plus",target:t&&i(t)?"_blank":void 0}})).withConfig({displayName:"MarkdownWrapperstyle__KnowMoreLink",componentId:"sc-149dqhq-7"})(["--link-underline:none;text-decoration:none;color:#4550e5;display:inline-block;margin-left:-0.4em;font-size:0.8em;&::before{font-size:1em;}&::after{content:unset;}"])},761:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(29),i=n(4730),o=n(9499),a=n(7794),c=n.n(a),s=n(1664),l=n(7294),u=n(1137),d=n(9051),f=n(9190),m=n(209),g=n(1199),p=n(4733),v=n(5477),h=n(5893),b=["children","value","id","className"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t=e.href,n={target:t&&(0,v.Bm)(t)?"_blank":void 0,rel:t&&(0,v.Bm)(t)?["nofollow","noopener","noreferrer"].join(" "):""};return(0,h.jsx)(s.default,{href:t,prefetch:!1,passHref:!0,children:(0,h.jsx)("a",w(w({},e),n))})},E=function(e){var t=e.children,n=e.ForceBlock,r=void 0===n?l.Fragment:n;return(0,h.jsx)(r,{children:(0,h.jsx)("a",{href:"#consentement",children:t})})},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.l)().use(m.Z).use(d.Z).use(f.Z).use(g.Z).use(u.Z,{createElement:l.createElement,Fragment:l.Fragment,components:w({a:k},e)})},x=function(e){var t=e.children,n=e.value,o=e.id,a=e.className,s=(0,i.Z)(e,b),u=(0,l.useState)(""),d=u[0],f=u[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(String(n||"string"===typeof t&&t||""));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,n]),(0,h.jsx)(v.UG,w(w({className:a,id:o&&String(o)},s),{},{children:O({"check-item":v.M1,"counter-item":v._q,"consent-link":E,cartridge:v.d,"puce-icon":v.Qx,"button-link":v.ZP,"know-more-link":v.gr}).processSync(d).result}))}},3178:function(e,t,n){n.d(t,{Z:function(){return k}});var r,i=n(341),o=n(7294),a=n(7379),c=n(5893),s=function(e){var t=e.children,n=e.name,r=void 0===n?"address":n,i=e.centred,o="fr-text--lg fr-my-2w fr-grid-row ".concat(i?"fr-grid-row--center":"fr-grid-row--left");return(0,c.jsx)("label",{className:o,htmlFor:r,children:(0,c.jsx)("span",{children:t})})},l=function(e){var t=e.placeholder,n=void 0===t?"":t,r=e.onChange;return(0,c.jsx)(i.gA,{className:"fr-input",type:"text",id:"address",name:"address",placeholder:n,onChange:r})},u=function(e){var t=e.text,n=void 0===t?"Aucune adresse trouv\xe9e :(":t;return(0,c.jsx)("p",{style:{margin:0,color:"#454545",padding:"0.25rem 1rem 0.75rem 1rem",fontStyle:"italic"},children:n})},d=function(e){var t=e.suggestions;return(0,c.jsx)(i.Gk,{children:t.map((function(e,t){var n=e.properties;return(0,c.jsx)(i.O2,{value:n.label},n.id+t)}))})},f=n(29),m=n(6835),g=n(7794),p=n.n(g),v=n(7954),h=n.n(v),b=n(3598);!function(e){e.Idle="idle",e.Loading="loading",e.Success="success",e.Error="error"}(r||(r={}));var y=function(e){var t=e.limit,n=void 0===t?5:t,i=e.autocomplete,a=void 0!==i&&i,c=e.debounceTime,s=void 0===c?300:c,l=e.minCharactersLength,u=void 0===l?3:l,d=o.useState([]),g=(0,m.Z)(d,2),v=g[0],y=g[1],w=o.useState(r.Idle),k=(0,m.Z)(w,2),E=k[0],O=k[1],x=o.useRef(!0),j=(0,b.Su)().suggestionService,S=h()(function(){var e=(0,f.Z)(p().mark((function e(t){var i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(i=t.trim())&&x.current&&!(i.length<=3)){e.next=4;break}return e.abrupt("return");case 4:return O(r.Loading),e.next=7,j.fetchSuggestions(i,{limit:n.toString(),autocomplete:a.toString()});case 7:o=e.sent,y(o.features),O(r.Success),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),O(r.Error),console.error({error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),s);return o.useEffect((function(){return function(){x.current=!1}}),[]),{suggestions:v,status:E,fetchSuggestions:function(e){return e.length>=u&&S(e)}}},w=(0,a.vJ)([".fr-input{transition:box-shadow .5s ease;color:#000074;:focus{box-shadow:inset 0 -2px 0 0 #000074;}}.fr-input-wrap{box-shadow:0 0 5px rgb(0 0 0 / 74%);border-radius:.25rem .25rem 0 0;}"]),k=function(e){var t=e.label,n=void 0===t?"":t,r=e.emptySuggestionText,a=e.debounceTime,f=void 0===a?200:a,m=e.minCharactersLength,g=void 0===m?3:m,p=e.placeholder,v=void 0===p?"Recherchez une adresse":p,h=e.className,b=e.popoverClassName,k=e.centred,E=e.onAddressSelected,O=e.onChange,x=y({debounceTime:f,limit:5,autocomplete:!1,minCharactersLength:g}),j=x.suggestions,S=x.fetchSuggestions,C=x.status,P=(0,o.useCallback)((function(e,t){var n=function(e,t){return t.find((function(t){return t.properties.label===e}))}(e,t),r=(null===n||void 0===n?void 0:n.geometry.coordinates)||[0,0];E(e,r,n)}),[E]),Z=(0,o.useMemo)((function(){return"idle"!==C&&"loading"!==C}),[C]),_=(0,o.useMemo)((function(){return!!j.length}),[j]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w,{}),(0,c.jsxs)("div",{className:"fr-input-group ".concat(h||""),children:[n&&(0,c.jsx)(s,{centred:k,children:n}),(0,c.jsxs)(i.hQ,{"aria-label":"address","aria-labelledby":"address",className:"fr-input-wrap fr-fi-search-line",onSelect:function(e){return P(e,j)},children:[(0,c.jsx)(l,{onChange:function(e){var t=e.currentTarget.value;O&&O(t),S(t)},placeholder:v}),Z&&(0,c.jsx)(i.SF,{className:b,children:_?(0,c.jsx)(d,{suggestions:j}):(0,c.jsx)(u,{text:r})})]})]})]})}},5873:function(e,t,n){n.d(t,{z$:function(){return d},ki:function(){return g},y_:function(){return i},aI:function(){return m}});var r=["75","77","78","91","92","93","94","95"],i=function(e){return r.includes(e.slice(0,2))},o=n(29),a=n(7794),c=n.n(a),s=function(e,t){if(!e||!t)return!1;var n="".concat(e<=100?"< 100m":e<=200?"> 100m et < 200m":"> 200m",", ").concat(t);return!["< 100m, collectif","< 100m, individuel","> 100m et < 200m, collectif","> 100m et < 200m, individuel","> 200m, collectif","> 200m, individuel"].includes(n)&&n},l=function(e){switch(e){case"\xe9lectricit\xe9":return"\xc9lectricit\xe9";case"gaz":return"Gaz";case"fioul":return"Fioul";default:return"Autre / Je ne sais pas"}},u=function(e){switch(e){case"individuel":return"Individuel";case"collectif":return"Collectif";default:return"Autre / Je ne sais pas"}},d=function(e){var t=e.address,n=e.eligibility,r=e.heatingEnergy,i=e.heatingType,o=e.network,a=e.structure,c=e.firstName,d=e.lastName,f=e.company,m=e.email,g=e.dataRetention,p=e.dataSharing;return{Nom:d,"Pr\xe9nom":c,Structure:a,"\xc9tablissement":f,"\xc9ligibilit\xe9":n,Adresse:t,Mail:m,"Mode de chauffage":l(r),"Type de chauffage":u(i),"Distance au r\xe9seau":null===o||void 0===o?void 0:o.distance,"Choix en fonction de la distance au r\xe9seau":s(null===o||void 0===o?void 0:o.distance,i)||"inconnue","J\u2019accepte que les donn\xe9es collect\xe9es soient utilis\xe9es \xe0 des fins d\u2019analyse par le minist\xe8re de la transition \xe9cologique.":g,"J\u2019accepte que ma demande soit communiqu\xe9e \xe0 ma commune et au gestionnaire du r\xe9seau le plus proche (sans aucun engagement de ma part)":p}},f=function(){var e=(0,o.Z)(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"./api/airtable/create-record",e.next=3,fetch("./api/airtable/create-record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(r=e.sent,!n){e.next=8;break}return e.abrupt("return",n(r,t));case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=f,g=function(e){var t=e.address,n=e.coords,r=e.eligibility,i=e.heatingEnergy,o=e.heatingType,a=e.network,c=e.structure,s=e.firstName;return{Nom:e.lastName||"","Pr\xe9nom":s||"","\xc9tablissement":e.company||"",Email:e.email||"",Structure:c||"",Chauffage:"".concat(i," - ").concat(o),Adresse:{coords:[n.lat,n.lon],label:t||""},"Distance au r\xe9seau":null!==a&&void 0!==a&&a.distance?"".concat(a.distance,"m"):"inconnue","\xc9ligiblit\xe9":r,"Accord pour la collecte des donn\xe9es":!0,"Accord pour partage au gestionnaire":!0}}},103:function(e,t,n){n.d(t,{qO:function(){return x},Co:function(){return S},V_:function(){return P},rc:function(){return Z}});var r=n(6835),i=n(1692),o=n(5873),a=function(){var e=(0,i.H)({formId:"8ccEEqGt"}),t=(0,r.Z)(e,2),n=t[0];return[function(e){return Promise.all([n((0,o.ki)(e)),(0,o.aI)((0,o.z$)(e))])},t[1]]},c=n(9499),s=n(29),l=n(7794),u=n.n(l),d=n(7812),f=n(7294),m=(n(5893),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"function"===typeof(null===(t=window)||void 0===t?void 0:t.fbq)&&window.fbq(["track"].concat((0,d.Z)(e),(0,d.Z)(n)))}),g=function(e,t){var n,i=(0,r.Z)(t,1)[0];return"function"===typeof(null===(n=window)||void 0===n?void 0:n.gtag)&&window.gtag("event","conversion",{send_to:"AW-".concat(e,"/").concat(i)})},p=function(e){var t,n=(0,r.Z)(e,1)[0];return"function"===typeof(null===(t=window)||void 0===t?void 0:t.lintrk)&&window.lintrk("track",{conversion_id:n})},v=JSON.parse('{"eligibilityTest":{"linkedInEvent":[5492674],"facebookEvent":["FindLocation"],"googleAdsEvent":["7ZZ6CJL-9YIDEMrY_5oo"],"matomoEvent":["Eligibilit\xe9","Formulaire de test - Envoi"]},"eligibilityTestOK":{"linkedInEvent":[5392842],"googleAdsEvent":["xmLwCPqp5P0CEMrY_5oo"],"matomoEvent":["Eligibilit\xe9","Formulaire de test - Adresse \xc9ligible"]},"eligibilityTestKO":{"linkedInEvent":[5492666],"googleAdsEvent":["4BLdCLqy_oIDEMrY_5oo"],"matomoEvent":["Eligibilit\xe9","Formulaire de test - Adresse In\xe9ligible"]},"eligibilityTestUnknow":{"linkedInEvent":[5492682],"googleAdsEvent":["4BLdCLqy_oIDEMrY_5oo"],"matomoEvent":["Eligibilit\xe9","Formulaire de test - Adresse Inconnue"]},"contactFormEligible":{"facebookEvent":["Contact"],"matomoEvent":["Eligibilit\xe9","Formulaire de contact \xe9ligible - Envoi"]},"contactFormIneligible":{"facebookEvent":["Contact"],"matomoEvent":["Eligibilit\xe9","Formulaire de contact in\xe9ligible - Envoi"]}}');function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){var e,t,n,i,o;return null===(e=window)||void 0===e||null===(t=e.tarteaucitron)||void 0===t||null===(n=t.proTemp)||void 0===n||null===(i=n.split("!"))||void 0===i||null===(o=i.reduce((function(e,t){var n=t.split("="),i=(0,r.Z)(n,2),o=i[0],a=i[1];return b(b({},e),{},(0,c.Z)({},o,"false"!==a))}),{}))||void 0===o?void 0:o.matomo},w=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"function"===typeof(null===(t=window)||void 0===t||null===(n=t._paq)||void 0===n?void 0:n.push)&&window._paq.push(["trackEvent"].concat((0,d.Z)(e),(0,d.Z)(y()?r:["Consentement non accord\xe9"])))};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t=e.estEligible,n=e.address,r=t?"contactFormEligible":"contactFormIneligible";w(v[r].matomoEvent,[n]),m(v[r].facebookEvent)},x=function(){var e=(0,f.useRef)(null),t=(0,f.useState)({}),n=t[0],i=t[1],o=(0,f.useState)(!1),c=o[0],l=o[1],d=(0,f.useState)(!1),h=d[0],b=d[1],y=(0,f.useState)(!1),k=y[0],x=y[1],j=(0,f.useState)("idle"),S=j[0],C=j[1],P=a(),Z=(0,r.Z)(P,1)[0],_=(0,f.useCallback)((function(t,n){return window.setTimeout((function(){var t=e.current;null===t||void 0===t||t.scrollIntoView({behavior:"smooth"}),n&&n()}),t)}),[]),N=(0,f.useCallback)((function(e){var t=e.address,n=e.heatingType;i(e),b(t&&!n)}),[]),I=(0,f.useCallback)((function(e){var t=e.address,r=n.heatingType;C("loading"),x(!1),function(e){w(v.eligibilityTest.matomoEvent,[e]),p(v.eligibilityTest.linkedInEvent),m(v.eligibilityTest.facebookEvent),g("10794036298",v.eligibilityTest.googleAdsEvent)}(t),b(t&&!r)}),[n]),q=(0,f.useCallback)((function(e){var t=e.address,n=e.heatingType;if(function(e){var t=e.eligibility,n=e.address;t?(w(v.eligibilityTestOK.matomoEvent,[n||"Adresse indefini"]),p(v.eligibilityTestOK.linkedInEvent),g("10794036298",v.eligibilityTestOK.googleAdsEvent)):(w(v.eligibilityTestKO.matomoEvent,[n||"Adresse indefini"]),p(v.eligibilityTestKO.linkedInEvent),g("10794036298",v.eligibilityTestKO.googleAdsEvent))}({eligibility:e.eligibility,address:t}),i(e),t&&n){l(!0);var r=_(500,(function(){return C("loaded")}));return function(){return window.clearTimeout(r)}}}),[_]),T=(0,f.useCallback)((0,s.Z)(u().mark((function e(){var t,r,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Tertiaire"!==(t=o.length>0&&void 0!==o[0]?o[0]:{}).structure&&(t.company=""),O(t),e.next=5,Z(t);case 5:return r=_(500),i(E(E({},n),t)),x(!0),e.abrupt("return",(function(){return window.clearTimeout(r)}));case 9:case"end":return e.stop()}}),e)}))),[n,Z,_]);return{EligibilityFormContactRef:e,addressData:n,contactReady:c,showWarning:h,messageSent:k,loadingStatus:S,warningMessage:"N'oubliez pas d'indiquer votre type de chauffage.",handleOnChangeAddress:N,handleOnFetchAddress:I,handleOnSuccessAddress:q,handleOnSubmitContact:T}},j=n(5934),S=function(e){var t=e.id,n=e.name,r=(0,f.useRef)((0,j.Z)());return(0,f.useMemo)((function(){return"".concat(t||n||"id","-").concat(r.current)}),[n,t])},C="__FCU:App__";var P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.beforeStorage,i=void 0===r?function(){}:r,o=n.keyPrefix,a=void 0===o?C:o,c=(0,f.useState)(t),s=c[0],l=c[1],u=(0,f.useMemo)((function(){return"".concat(a,"-").concat(e)}),[a,e]),d=(0,f.useRef)(u),m=(0,f.useCallback)((function(e,t){return window.localStorage.setItem(e,JSON.stringify(i(t)))}),[i]);return(0,f.useEffect)((function(){try{var e=window.localStorage.getItem(u);null!==e&&l(JSON.parse(e))}catch(t){console.error(t)}}),[u]),(0,f.useEffect)((function(){try{m(d.current,s)}catch(e){console.error(e)}}),[m,s]),(0,f.useEffect)((function(){var e=d.current;if(u!==e)try{m(u,s),d.current=u,window.localStorage.removeItem(e)}catch(t){console.error(t)}}),[u,m,s]),[s,l]};var Z=function(e){var t=(0,f.useRef)();return(0,f.useEffect)((function(){t.current=e}),[e]),t.current}}}]);