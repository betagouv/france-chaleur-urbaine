(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{7942:function(e,r,t){"use strict";var n=t(5696);r.default=void 0;var o,a=(o=t(7294))&&o.__esModule?o:{default:o},i=t(4957),l=t(9898),c=t(639);var s={};function d(e,r,t,n){if(e&&i.isLocalURL(r)){e.prefetch(r,t,n).catch((function(e){0}));var o=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;s[r+"%"+t+(o?"%"+o:"")]=!0}}var u=function(e){var r,t=!1!==e.prefetch,o=l.useRouter(),u=a.default.useMemo((function(){var r=i.resolveHref(o,e.href,!0),t=n(r,2),a=t[0],l=t[1];return{href:a,as:e.as?i.resolveHref(o,e.as):l||a}}),[o,e.href,e.as]),f=u.href,p=u.as,m=e.children,g=e.replace,h=e.shallow,b=e.scroll,v=e.locale;"string"===typeof m&&(m=a.default.createElement("a",null,m));var x=(r=a.default.Children.only(m))&&"object"===typeof r&&r.ref,y=c.useIntersection({rootMargin:"200px"}),j=n(y,2),w=j[0],_=j[1],k=a.default.useCallback((function(e){w(e),x&&("function"===typeof x?x(e):"object"===typeof x&&(x.current=e))}),[x,w]);a.default.useEffect((function(){var e=_&&t&&i.isLocalURL(f),r="undefined"!==typeof v?v:o&&o.locale,n=s[f+"%"+p+(r?"%"+r:"")];e&&!n&&d(o,f,p,{locale:r})}),[p,f,_,v,t,o]);var N={ref:k,onClick:function(e){r.props&&"function"===typeof r.props.onClick&&r.props.onClick(e),e.defaultPrevented||function(e,r,t,n,o,a,l,c){("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var r=e.currentTarget.target;return r&&"_self"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&i.isLocalURL(t))&&(e.preventDefault(),r[o?"replace":"push"](t,n,{shallow:a,locale:c,scroll:l}))}(e,o,f,p,g,h,b,v)},onMouseEnter:function(e){r.props&&"function"===typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),i.isLocalURL(f)&&d(o,f,p,{priority:!0})}};if(e.passHref||"a"===r.type&&!("href"in r.props)){var C="undefined"!==typeof v?v:o&&o.locale,L=o&&o.isLocaleDomain&&i.getDomainLocale(p,C,o&&o.locales,o&&o.domainLocales);N.href=L||i.addBasePath(i.addLocale(p,C,o&&o.defaultLocale))}return a.default.cloneElement(r,N)};r.default=u},639:function(e,r,t){"use strict";var n=t(5696);Object.defineProperty(r,"__esModule",{value:!0}),r.useIntersection=function(e){var r=e.rootRef,t=e.rootMargin,s=e.disabled||!i,d=o.useRef(),u=o.useState(!1),f=n(u,2),p=f[0],m=f[1],g=o.useState(r?r.current:null),h=n(g,2),b=h[0],v=h[1],x=o.useCallback((function(e){d.current&&(d.current(),d.current=void 0),s||p||e&&e.tagName&&(d.current=function(e,r,t){var n=function(e){var r,t={root:e.root||null,margin:e.rootMargin||""},n=c.find((function(e){return e.root===t.root&&e.margin===t.margin}));n?r=l.get(n):(r=l.get(t),c.push(t));if(r)return r;var o=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var r=o.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;r&&t&&r(t)}))}),e);return l.set(t,r={id:t,observer:a,elements:o}),r}(t),o=n.id,a=n.observer,i=n.elements;return i.set(e,r),a.observe(e),function(){if(i.delete(e),a.unobserve(e),0===i.size){a.disconnect(),l.delete(o);var r=c.findIndex((function(e){return e.root===o.root&&e.margin===o.margin}));r>-1&&c.splice(r,1)}}}(e,(function(e){return e&&m(e)}),{root:b,rootMargin:t}))}),[s,b,t,p]);return o.useEffect((function(){if(!i&&!p){var e=a.requestIdleCallback((function(){return m(!0)}));return function(){return a.cancelIdleCallback(e)}}}),[p]),o.useEffect((function(){r&&v(r.current)}),[r]),[x,p]};var o=t(7294),a=t(6286),i="undefined"!==typeof IntersectionObserver;var l=new Map,c=[]},1095:function(e,r,t){"use strict";t.d(r,{Z:function(){return w}});var n=t(7294),o=t(5893),a=function(e){var r=e.label,t=e.name,n=void 0===t?"address":t,a=e.centred,i="fr-text--lg fr-my-2w fr-grid-row ".concat(a?"fr-grid-row--center":"fr-grid-row--left");return(0,o.jsx)("label",{className:i,htmlFor:n,children:(0,o.jsx)("span",{children:r})})},i=t(341),l=function(e){var r=e.suggestions;return(0,o.jsx)(i.Gk,{children:r.map((function(e,r){var t=e.properties;return(0,o.jsx)(i.O2,{value:t.label},t.id+r)}))})},c=t(29),s=t(6835),d=t(7794),u=t.n(d),f=t(9341),p=t(7954),m=t.n(p),g=t(3598),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:5,autocomplete:!1,debounceTime:300},r=e.limit,t=e.autocomplete,o=e.debounceTime,a=n.useState([]),i=(0,s.Z)(a,2),l=i[0],d=i[1],p=n.useState(f.qb.Idle),h=(0,s.Z)(p,2),b=h[0],v=h[1],x=n.useRef(!0),y=3,j=(0,g.Su)(),w=j.suggestionService,_=m()(function(){var e=(0,c.Z)(u().mark((function e(n){var o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(o=n.trim())&&x.current&&!(o.length<=y)){e.next=4;break}return e.abrupt("return");case 4:return v(f.qb.Loading),e.next=7,w.fetchSuggestions(o,{limit:r.toString(),autocomplete:t.toString()});case 7:a=e.sent,d(a.features),v(f.qb.Success),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),v(f.qb.Error),console.log({error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r){return e.apply(this,arguments)}}(),o);return n.useEffect((function(){return function(){x.current=!1}}),[]),{suggestions:l,status:b,fetchSuggestions:_}},b=t(7379),v=function(e){var r=e.placeholder,t=void 0===r?"":r,n=e.onChange;return(0,o.jsx)(i.gA,{className:"fr-input",type:"text",id:"address",name:"address",placeholder:t,onChange:n})},x=function(e){var r=e.text,t=void 0===r?"Aucune adresse trouv\xe9e :(":r;return(0,o.jsx)("p",{style:{margin:0,color:"#454545",padding:"0.25rem 1rem 0.75rem 1rem",fontStyle:"italic"},children:t})},y=(0,b.vJ)([".fr-input{transition:box-shadow .5s ease;color:#000074;:focus{box-shadow:inset 0 -2px 0 0 #000074;}}.fr-input-wrap{box-shadow:0 0 5px rgb(0 0 0 / 74%);border-radius:.25rem .25rem 0 0;}"]),j=function(e){return!!e.length},w=function(e){var r=e.label,t=void 0===r?"":r,c=e.emptySuggestionText,s=e.debounceTime,d=void 0===s?200:s,u=e.minCharactersLength,p=void 0===u?3:u,m=e.placeholder,g=void 0===m?"Recherchez une adresse":m,b=e.className,w=e.popoverClassName,_=e.centred,k=function(e,r){var t=h({debounceTime:r,limit:5,autocomplete:!1}),o=t.suggestions,a=t.fetchSuggestions,i=t.status,l=(0,n.useCallback)((function(r,t){var n=(0,f.Yu)(r,t);e(r,n)}),[e]);return{handleSelect:l,suggestions:o,fetchSuggestions:function(e,r){return e.length>=r&&a(e)},status:i}}(e.onAddressSelected,d),N=k.handleSelect,C=k.suggestions,L=k.fetchSuggestions,O=function(e){return"idle"!==e&&"loading"!==e}(k.status);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y,{}),(0,o.jsxs)("div",{className:"fr-input-group ".concat(b||""),children:[t&&(0,o.jsx)(a,{label:t,centred:_}),(0,o.jsxs)(i.hQ,{"aria-label":"address","aria-labelledby":"address",className:"fr-input-wrap fr-fi-search-line",onSelect:function(e){return N(e,C)},children:[(0,o.jsx)(v,{onChange:function(e){return L(e.currentTarget.value,p)},placeholder:g}),O&&(0,o.jsx)(i.SF,{className:w,children:j(C)?(0,o.jsx)(l,{suggestions:C}):(0,o.jsx)(x,{text:c})})]})]})]})}},9341:function(e,r,t){"use strict";t.d(r,{Yu:function(){return o},dx:function(){return a},qb:function(){return n}});var n,o=function(e,r){var t=r.find((function(r){return r.properties.label===e}));return(null===t||void 0===t?void 0:t.geometry.coordinates)||[0,0]},a=function(e){return{lon:e[0],lat:e[1]}};!function(e){e.Idle="idle",e.Loading="loading",e.Success="success",e.Error="error"}(n||(n={}))},5045:function(e,r,t){"use strict";t.d(r,{EV:function(){return i},YG:function(){return l},Ji:function(){return c}});var n=t(1664),o=(t(7294),t(7379)),a=t(5893),i="210px",l="calc(214px - 10rem)",c="98px",s=o.ZP.section.withConfig({displayName:"MainLayout__Main",componentId:"sc-4z5cbf-0"})(["min-height:calc(100vh - ",");@media (min-width:992px){min-height:calc(100vh - "," - ",");","}"],i,"214px","291px",(function(e){return e.fullscreen&&"min-height: calc(100vh - ".concat(l," - ").concat(c,");")})),d=o.ZP.img.withConfig({displayName:"MainLayout__HeaderLogo",componentId:"sc-4z5cbf-1"})(["width:auto;height:auto;max-height:110px;max-width:200px;"]),u=o.ZP.p.withConfig({displayName:"MainLayout__HeaderLabel",componentId:"sc-4z5cbf-2"})(["font-size:1.9rem;color:#069368;"]),f=o.ZP.p.withConfig({displayName:"MainLayout__HeaderSubLabel",componentId:"sc-4z5cbf-3"})(["margin:0;"]),p=o.ZP.img.withConfig({displayName:"MainLayout__GithubLogo",componentId:"sc-4z5cbf-4"})(["shape-rendering:crispEdges;width:0.7rem;height:0.7rem;"]),m=[{label:"Accueil",url:"/"},{label:"Documentation",url:"/ressources"},{label:"Partenaires",url:"/partenaires"},{label:"Carte des r\xe9seaux",url:"/carte"}];r.ZP=function(e){var r=e.children,t=e.currentMenu,o=e.fullscreen;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"fr-header ".concat(o?"fullscreen":""),children:[(0,a.jsx)("div",{className:"fr-header__body",children:(0,a.jsx)("div",{className:"fr-container",children:(0,a.jsx)("div",{className:"fr-header__body-row",children:(0,a.jsxs)("div",{className:"fr-header__brand",children:[(0,a.jsxs)("div",{className:"fr-header__brand-top",children:[(0,a.jsx)("div",{className:"fr-header__logo",children:(0,a.jsxs)("p",{className:"fr-logo",children:["R\xe9publique",(0,a.jsx)("br",{}),"Fran\xe7aise"]})}),(0,a.jsx)("div",{className:"fr-header__navbar",children:(0,a.jsx)("button",{className:"fr-btn--menu fr-btn","data-fr-opened":"false","aria-controls":"modal-870","aria-haspopup":"menu",title:"Menu",id:"fr-btn-menu-mobile-4",children:"Menu"})}),(0,a.jsx)("div",{className:"fr-header__operator",children:(0,a.jsx)(n.default,{href:"/",children:(0,a.jsx)("a",{title:"france chaleur urbaine",children:(0,a.jsx)(d,{className:"fr-footer__logo",src:"./logo-fcu.png",alt:"logo france chaleur urbaine"})})})})]}),(0,a.jsx)("div",{className:"fr-header__service",children:(0,a.jsx)(n.default,{href:"/",children:(0,a.jsxs)("a",{title:"france chaleur urbaine",children:[(0,a.jsx)(u,{className:"fr-header__service-title",children:"France Chaleur Urbaine"}),(0,a.jsx)(f,{children:"Service public pour le raccordement des copropri\xe9t\xe9s aux r\xe9seaux de chaleur"})]})})})]})})})}),(0,a.jsx)("div",{className:"fr-header__menu fr-modal",id:"modal-870",children:(0,a.jsxs)("div",{className:"fr-container",children:[(0,a.jsx)("button",{className:"fr-link--close fr-link","aria-controls":"modal-870",children:"Fermer"}),(0,a.jsx)("div",{className:"fr-header__menu-links"}),(0,a.jsx)("nav",{className:"fr-nav",id:"header-navigation","aria-label":"Menu principal",children:(0,a.jsxs)("ul",{className:"fr-nav__list",children:[(0,a.jsx)("li",{className:"fr-nav__Logo-Entry",children:(0,a.jsx)("img",{className:"fr-nav__logo",src:"./logo-fcu.png",alt:"logo france chaleur urbaine"})}),m.map((function(e){var r=e.label,o=e.url;return(0,a.jsx)("li",{className:"fr-nav__item ".concat(t===o?"fr-nav__item--active":""),children:(0,a.jsx)(n.default,{href:o,prefetch:!1,children:(0,a.jsx)("a",{className:"fr-nav__link","aria-current":t===o?"page":void 0,children:r})})},o)}))]})})]})})]}),(0,a.jsx)(s,{fullscreen:o,children:r}),(0,a.jsx)("footer",{className:"fr-footer ".concat(o?"fullscreen":""),id:"footer",children:(0,a.jsxs)("div",{className:"fr-container",children:[(0,a.jsxs)("div",{className:"fr-footer__body fr-footer__body--operator",children:[(0,a.jsxs)("div",{className:"fr-footer__brand fr-enlarge-link",children:[(0,a.jsxs)("p",{className:"fr-logo",title:"r\xe9publique fran\xe7aise",children:["r\xe9publique",(0,a.jsx)("br",{}),"fran\xe7aise"]}),(0,a.jsx)(n.default,{href:"/",children:(0,a.jsx)("a",{className:"fr-footer__brand-link",title:"Retour \xe0 l\u2019accueil",children:(0,a.jsx)("img",{className:"fr-footer__logo",src:"./logo-fcu-with-typo.jpg",alt:"logo france chaleur urbaine"})})})]}),(0,a.jsx)("div",{className:"fr-footer__content",children:(0,a.jsxs)("p",{className:"fr-footer__content-desc",children:["France Chaleur Urbaine est un projet d'innovation pour acc\xe9l\xe9rer le raccordement des copropri\xe9t\xe9s aux r\xe9seaux de chaleur en vue de l'atteinte des objectifs de d\xe9veloppement de la chaleur d'origine renouvelable.",(0,a.jsx)("br",{}),(0,a.jsxs)("strong",{children:["Faites nous part de vos propositions pour am\xe9liorer ce service : ",(0,a.jsx)("br",{}),(0,a.jsx)("a",{href:"mailto:france-chaleur-urbaine@beta.gouv.fr",target:"_blank",rel:"noreferrer",children:"france-chaleur-urbaine@beta.gouv.fr"})]})]})})]}),(0,a.jsxs)("div",{className:"fr-footer__bottom",children:[(0,a.jsxs)("ul",{className:"fr-footer__bottom-list",children:[(0,a.jsx)("li",{className:"fr-footer__bottom-item",children:(0,a.jsx)(n.default,{href:"/accessibilite",prefetch:!1,children:(0,a.jsx)("a",{className:"fr-footer__bottom-link",children:"Accessibilit\xe9: non conforme"})})}),(0,a.jsx)("li",{className:"fr-footer__bottom-item",children:(0,a.jsx)(n.default,{href:"/mentions-legales",prefetch:!1,children:(0,a.jsx)("a",{className:"fr-footer__bottom-link",children:"Mentions l\xe9gales & CGU"})})}),(0,a.jsx)("li",{className:"fr-footer__bottom-item",children:(0,a.jsx)("a",{className:"fr-footer__bottom-link",href:"#consentement",children:"Cookies & Consentements"})}),(0,a.jsx)("li",{className:"fr-footer__bottom-item",children:(0,a.jsx)(n.default,{href:"/politique-de-confidentialite",prefetch:!1,children:(0,a.jsx)("a",{className:"fr-footer__bottom-link",children:"Donn\xe9es personnelles"})})}),(0,a.jsx)("li",{className:"fr-footer__bottom-item",children:(0,a.jsx)(n.default,{href:"/stats",prefetch:!1,children:(0,a.jsx)("a",{className:"fr-footer__bottom-link",children:"Statistiques"})})}),(0,a.jsx)("li",{className:"fr-footer__bottom-item",children:(0,a.jsx)(n.default,{href:"https://github.com/betagouv/france-chaleur-urbaine",prefetch:!1,children:(0,a.jsxs)("a",{className:"fr-footer__bottom-link",target:"_blank",children:[(0,a.jsx)(p,{src:"./icons/github-brands.svg",alt:"","aria-disabled":"true"})," ","Github"]})})})]}),(0,a.jsx)("div",{className:"fr-footer__bottom-copy",children:(0,a.jsxs)("p",{children:["Sauf mention contraire, tous les textes de ce site sont sous"," ",(0,a.jsx)("a",{href:"https://github.com/etalab/licence-ouverte/blob/master/LO.md",target:"_blank",rel:"noopener noreferrer",children:"licence etalab-2.0"})]})})]})]})})]})}},5459:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Ie}});var n=t(9499),o=t(7812),a=t(4613),i=t.n(a),l=(t(6644),t(7294)),c=t(7379),s="#18753c",d="#b8fec9",u="#ce0500",f="#ffe9e9",p=c.ZP.div.withConfig({displayName:"CardSearchDetailsstyle__MapCard",componentId:"sc-tzh04e-0"})(["width:100%;display:block;background-color:white;margin:1em 0;border:2px solid var(--bf500);border:1px solid rgb(0 0 0 / 20%);border-radius:0.3em;overflow:hidden;box-shadow:1px 0 4px 1px rgb(0 0 0 / 20%);"," > header{display:flex;padding:0.5em;cursor:",";font-weight:bold;"," .buttonsWrapper{flex:1;display:flex;justify-content:flex-end;align-items:flex-start;padding-left:0.5rem;.closeButton{position:relative;display:flex;justify-content:center;align-items:center;background-color:#ffffff;box-shadow:0 1px 2px 1px #33333333;width:1.25rem;height:1.25rem;border-radius:50%;cursor:pointer;::before,::after{content:'';position:absolute;width:2px;height:80%;background-color:#333;}::before{content:'';transform:rotate(-45deg);}::after{content:'';transform:rotate(45deg);}}}}section{padding:0.5em;","}&.close{section{max-height:0;padding:0 0.5em;}:hover{section{max-height:1000px;padding:0.25em 0.5em;}}}"],(function(e){var r=e.typeCard,t=e.isEligible;switch(r){case"search":return(0,c.iv)(["border:2px solid ",";"],t?d:f);case"legend":return(0,c.iv)(["border:2px solid #4550e5;"])}}),(function(e){var r=e.isClickable,t=e.isClosable;return r||t?"pointer":"default"}),(function(e){var r=e.typeCard,t=e.isEligible;switch(r){case"search":return(0,c.iv)(["background-color:",";color:",";"],t?d:f,t?s:u);case"legend":return(0,c.iv)(["background-color:#4550e5;color:#ffffff;"])}}),(function(e){return e.isClosable&&(0,c.iv)(["max-height:1000px;transition:max-height 0.75s ease,padding 0.5s ease 0.25s;"])})),m=c.ZP.div.withConfig({displayName:"CardSearchDetailsstyle__EligibilityResult",componentId:"sc-tzh04e-1"})(["background-color:#eeeeee;padding:0.5em;margin-bottom:0.5em;border-left:2px solid;",""],(function(e){var r=e.isEligible;return(0,c.iv)(["border-color:","",";"],r?s:u,"a6")})),g=t(5893),h=function(e){var r,t,n,o=e.result,a=e.onClick,i=e.onClickClose,l=((null===(r=o.addressDetails)||void 0===r||null===(t=r.networkDetails)||void 0===t?void 0:t.network)||{}).distance,c=((null===(n=o.addressDetails)||void 0===n?void 0:n.networkDetails)||{}).isEligible;return(0,g.jsxs)(p,{isEligible:c,typeCard:"search",onClick:function(e){var r="function"===typeof a&&a(o)||void 0;return e.stopPropagation(),r},isClickable:!0,children:[(0,g.jsxs)("header",{children:[o.address,(0,g.jsx)("div",{className:"buttonsWrapper",children:i&&(0,g.jsx)("div",{className:"closeButton",onClick:function(){i&&i(o)}})})]}),(0,g.jsxs)("section",{children:[(0,g.jsx)(m,{isEligible:c,children:c?"Bonne nouvelle ! Un r\xe9seau de chaleur passe \xe0 proximit\xe9 de cette adresse.":"Cette adresse n'est pour le moment pas raccordable \xe0 un r\xe9seau de chaleur."}),(0,g.jsx)("div",{children:l&&"Distance aux reseaux : ".concat(l>=1e3?"".concat(l/1e3,"km"):"".concat(l,"m"))})]})]})},b=((0,c.vJ)([".leaflet-container .leaflet-control-attribution{margin:0.5em 0;padding:0 0.5em;background:rgba(255,255,255,0.85);font-weight:bold;padding-left:3rem;position:relative;}.leaflet-control-attribution{position:relative;border-radius:1em 0 0 1em;overflow:hidden;cursor:default;transform:translateX(calc(100% - 3em));transition:transform 0.4s ease;&::before{content:'\xa9';position:absolute;left:0;height:100%;display:inline-flex;align-items:center;justify-content:center;width:3rem;padding-left:1.25em;padding-right:0.5em;margin-right:0.5em;margin-left:-0.5em;border-right:1px solid #fff;background-color:#4550e5;color:#fff;font-weight:bold;cursor:pointer;}&::after{content:'';position:absolute;left:0;top:50%;width:0em;height:0em;border:0 none transparent;border-left:0.5em solid transparent;border-right:0.5em solid transparent;border-bottom:0.5em solid #fff;transform:translateY(calc(-50% - .05em)) rotate(-90deg) translateY(.45em);transition:transform 0.5s ease;}&:hover{transform:translateX(0);&::after{transform:translateY(calc(-50% - .05em)) rotate(90deg) translateY(-.45em);}}a[target]{color:#4550e5;&::after{content:'';}}}.my-div-icon{position:relative;i{position:relative;display:block;transform-origin:bottom;::before{content:\"\";display:block;position:absolute;bottom:0;left:0;width:2.5rem;height:2.5rem;background-color:#4550e5;border:2px solid white;border-radius:50% 45% 75% 0% / 75% 45% 50% 0%;transform-origin:bottom left;transform:translateX(6px) translateY(-3px) rotate(-45deg);box-shadow:-3px 3px 4px 3px rgb(0 0 0 / 35%)}::after{content:\"\";display:block;position:absolute;top:0;left:0;width:1.3rem;height:1.3rem;border:5px double white;border-radius:50%;transform:translateX(6px) translateY(-3px) translateX(-.65rem) translateY(-.65rem) translateY(-1.8rem);}}}.pan-map-aside{width:100%;}"]),(0,c.vJ)(["hr{border:1px solid #4550e5;border-width:0 0 1px;margin:.75em 2em;height:0;}.legend{width:0rem;height:1rem;display:inline-flex;vertical-align:text-bottom;justify-content:center;align-items:center;margin-right:0.2em;::before{content:'';display:block;height:1rem;}}.legend-heat-network{width:1.5rem;:before{width:100%;height:0;border:3px solid #2d9748;border-radius:3px;margin-bottom:calc(0.25em - 1.5px)}}.legend-boiler-room{width:1.5rem;:before{width:100%;border:3px solid #ff6600;border-radius:3px;background-color:#ff660088;margin-bottom:calc(0.25em - 1.5px)}}.legend-substation{width:1.5rem;:before{width:1rem;border:3px solid #ff00d4;border-radius:50%;background-color:#ff00d4;margin-bottom:calc(0.25em - 1.5px)}}.legend-energy{width:.6rem;::before{width:0.5rem;height:0.5rem;border-radius:50%;margin-bottom:calc(0.25em - 1.5px)}}.legend-heating{width:0rem;}"])),v=c.ZP.div.withConfig({displayName:"MapLegendstyle__GroupeLabel",componentId:"sc-rviaut-0"})(["padding-bottom:0.8em;&:last-child{padding-bottom:0;}header{font-weight:bold;margin-bottom:0.5em;}.groupe-label-body{display:flex;flex-wrap:wrap;justify-content:stretch;align-items:stretch;padding:0 0 0.4rem 0;.label-item{flex:1;min-width:30%;max-width:100%;display:flex;text-align:left;justify-content:flex-start;label{display:inline;white-space:nowrap;&::before{width:0.7em;}}}}"]),x=c.ZP.span.withConfig({displayName:"MapLegendstyle__LabelLegend",componentId:"sc-rviaut-1"})(["",""],(function(e){var r=e.bgColor;return r&&(0,c.iv)(["::before{background-color:",";}"],r)})),y=(c.ZP.div.withConfig({displayName:"MapLegendstyle__ScaleLegendWrapper",componentId:"sc-rviaut-2"})(["padding:0 0 0.4rem 0;",""],(function(e){return e.framed&&(0,c.iv)(["padding:0.3em 0.5em 0.55em;margin-bottom:0.4rem;background-color:#efefef;border-radius:0.2em;"])})),c.ZP.div.withConfig({displayName:"MapLegendstyle__ScaleLegendHeader",componentId:"sc-rviaut-3"})(["font-size:0.8em;margin-bottom:0.2em;"]),c.ZP.label.withConfig({displayName:"MapLegendstyle__ScaleLegendLabel",componentId:"sc-rviaut-4"})(["display:inline-block;margin-bottom:0.2em;"]),c.ZP.input.withConfig({displayName:"MapLegendstyle__Input",componentId:"sc-rviaut-5"})([""]),c.ZP.div.withConfig({displayName:"MapLegendstyle__ScaleLegendBody",componentId:"sc-rviaut-6"})(["display:flex;",""],(function(e){return e.checkbox&&(0,c.iv)(["padding:0 0.3em;"])})),c.ZP.div.withConfig({displayName:"MapLegendstyle__ScaleLegendLabelWrapper",componentId:"sc-rviaut-7"})(["font-size:0.9em;display:inline;position:relative;padding-right:0.5em;margin-right:0.5em;&::after{content:'';display:block;position:absolute;width:2px;height:70%;background-color:rgb(69 80 229 / 34%);right:0;top:15%;}&:last-child::after{display:none;}"]),c.ZP.span.withConfig({displayName:"MapLegendstyle__ScaleLabelLegend",componentId:"sc-rviaut-8"})(["width:",";height:1em;display:inline-flex;vertical-align:text-bottom;justify-content:center;align-items:center;margin-right:0.2em;::before{content:'';display:block;width:",";height:",";border-radius:50%;margin-bottom:calc(0.25em - 1.5px);background-color:",";}"],(function(e){var r=e.size;return"".concat(r,"rem")}),(function(e){var r=e.size;return"".concat(r,"em")}),(function(e){var r=e.size;return"".concat(r,"em")}),(function(e){return e.bgColor||"grey"})),c.ZP.div.withConfig({displayName:"MapLegendstyle__MapWrapper",componentId:"sc-rviaut-9"})(["height:100%;width:100%;flex:1;position:relative;overflow:hidden;"]),"3.5rem"),j="5rem",w="20px";c.ZP.div.withConfig({displayName:"MapLegendstyle__MapControlWrapper",componentId:"sc-rviaut-10"})(["position:absolute;z-index:401;top:0;font-size:1rem;padding:1em;top:0;bottom:0;right:0;width:calc(22.5% + 2em);max-width:24rem;min-width:21rem;:before{content:'';display:block;color:#fff;position:absolute;top:0;bottom:0;left:0;right:0;background:white;box-shadow:1px 0 4px 1px rgb(0 0 0 / 20%);z-index:-1;transform:translateX(105%);transition:transform ease-in-out 0.5s;}"]),c.ZP.div.withConfig({displayName:"MapLegendstyle__MapAsideContainer",componentId:"sc-rviaut-11"})(["position:absolute;z-index:401;font-size:1rem;padding:1em;max-height:100%;left:0;right:0;"," overflow-y:overlay;&.search-result{padding-top:",";padding-bottom:",";mask-image:linear-gradient(180deg,transparent 0,black 0%),linear-gradient( 180deg,transparent 0,black ",",black calc(100% - ","),transparent 100% );mask-size:",",calc(100% - ",");mask-repeat:no-repeat,no-repeat;mask-position:right top,left top;}"],(function(e){return e.bottom?(0,c.iv)(["bottom:0;"]):(0,c.iv)(["top:0;"])}),y,j,y,j,w,w),c.ZP.input.attrs({type:"text"}).withConfig({displayName:"MapLegendstyle__InputSearch",componentId:"sc-rviaut-12"})(["width:100%;box-sizing:border-box;padding:0.5em;line-height:1em;border-radius:0.3em;font-size:1rem;color:var(--bf500);border:2px solid var(--bf500);transition-property:border-color,color;transition-timing-function:ease;transition-duration:0.5s;outline:0px none transparent;box-shadow:1px 0 4px 1px rgb(0 0 0 / 20%);:placeholder-shown:not(:focus){border:2px solid rgb(0 0 0 / 20%);}"]);var _=function(e){var r=e.id,t=e.bgColor,n=e.className,o=e.label,a=e.checked,i=e.onChange;return(0,g.jsx)("div",{children:(0,g.jsxs)("label",{children:[(0,g.jsx)("input",{type:"checkbox",checked:a,onChange:function(){i(r)}}),(0,g.jsx)(x,{className:"legend ".concat(n||""),bgColor:t&&"".concat(t,"99")}),o]})})},k=c.ZP.div.withConfig({displayName:"ScaleLegendstyle__ScaleLegendWrapper",componentId:"sc-107jkwm-0"})(["padding:0 0 0.4rem 0;",""],(function(e){return e.framed&&(0,c.iv)(["padding:0.3em 0.5em 0.55em;margin-bottom:0.4rem;background-color:#efefef;border-radius:0.2em;"])})),N=c.ZP.div.withConfig({displayName:"ScaleLegendstyle__ScaleLegendHeader",componentId:"sc-107jkwm-1"})(["font-size:0.8em;margin-bottom:0.2em;"]),C=c.ZP.label.withConfig({displayName:"ScaleLegendstyle__ScaleLegendLabel",componentId:"sc-107jkwm-2"})(["display:inline-block;margin-bottom:0.2em;"]),L=c.ZP.input.withConfig({displayName:"ScaleLegendstyle__Input",componentId:"sc-107jkwm-3"})([""]),O=c.ZP.div.withConfig({displayName:"ScaleLegendstyle__ScaleLegendBody",componentId:"sc-107jkwm-4"})(["display:flex;",""],(function(e){return e.checkbox&&(0,c.iv)(["padding:0 0.3em;"])})),S=c.ZP.div.withConfig({displayName:"ScaleLegendstyle__ScaleLegendLabelWrapper",componentId:"sc-107jkwm-5"})(["font-size:0.9em;display:inline;position:relative;padding-right:0.5em;margin-right:0.5em;&::after{content:'';display:block;position:absolute;width:2px;height:70%;background-color:rgb(69 80 229 / 34%);right:0;top:15%;}&:last-child::after{display:none;}"]),P=c.ZP.span.withConfig({displayName:"ScaleLegendstyle__ScaleLabelLegend",componentId:"sc-107jkwm-6"})(["width:",";height:1em;display:inline-flex;vertical-align:text-bottom;justify-content:center;align-items:center;margin-right:0.2em;::before{content:'';display:block;width:",";height:",";border-radius:50%;margin-bottom:calc(0.25em - 1.5px);background-color:",";}"],(function(e){var r=e.size;return"".concat(r,"rem")}),(function(e){var r=e.size;return"".concat(r,"em")}),(function(e){var r=e.size;return"".concat(r,"em")}),(function(e){return e.bgColor||"grey"})),Z=function(e){var r=e.label,t=e.checkbox,n=e.checked,o=e.framed,a=e.onChange,i=e.color,l=e.scaleLabels;return(0,g.jsxs)(k,{framed:o,children:[t?(0,g.jsxs)(C,{children:[(0,g.jsx)(L,{type:"checkbox",checked:n,onChange:a}),r]}):(0,g.jsx)(N,{children:r}),(0,g.jsx)(O,{checkbox:t,children:l.map((function(e){var r=e.bgColor,t=e.label,n=e.size;return(0,g.jsxs)(S,{children:[(0,g.jsx)(P,{bgColor:r||i,size:n}),t]},t)}))})]})},z={Energy:function(){return(0,g.jsx)(Z,{framed:!0,label:"Nombre de lots d'habitation",color:"#afafaf",scaleLabels:[{label:"< 100",size:.5},{label:"100 \xe0 1000",size:1},{label:"> 1000",size:2}]})},GasUsage:function(){return(0,g.jsx)(Z,{framed:!0,label:"Niveau de consomation de gaz (MWh)",color:"#afafaf",scaleLabels:[{label:"< 100",size:.5},{label:"100 \xe0 1000",size:1},{label:"> 1000",size:2}]})}};function M(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var E=function(e){var r,t=e.id,o=e.title,a=e.description,i=e.entries,l=e.layerDisplay,c=e.onChangeEntry;return(0,g.jsxs)(v,{children:[o&&(0,g.jsx)("header",{children:o}),(0,g.jsx)("div",{className:"groupe-label-body",children:i.map((function(e){var r;return(0,g.jsx)(_,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?M(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({checked:(null===l||void 0===l?void 0:l[t])&&(null===l||void 0===l||null===(r=l[t])||void 0===r?void 0:r.includes(e.id)),onChange:function(){return c(t,e.id)}},e),e.id)}))}),a&&(null===z||void 0===z||null===(r=z[a])||void 0===r?void 0:r.call(z))]})};function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var D=function(e){var r=e.data,t=e.forceClosed,o=e.layerDisplay,a=e.onToogleFeature,i=e.onToogleInGroup,c=(0,l.useState)(!0),s=c[0],d=c[1];return(0,g.jsxs)(p,{typeCard:"legend",isClosable:!0,className:!s||t?"close":"",children:[(0,g.jsx)(b,{}),(0,g.jsx)("header",{onClick:function(){return d(!s)},children:"L\xe9gende"}),(0,g.jsx)("section",{children:r.map((function(e,r){if("separator"===e)return(0,g.jsx)("hr",{},"separator-".concat(r));if("object"!==typeof e)return null;var t=e.id,l=e.title,c=e.entries,s=e.description,d=e.type,u=void 0===d?"list":d;return"group"===u?(0,g.jsx)(E,{layerDisplay:o,id:t,title:l,description:s,entries:c,onChangeEntry:i},"group-".concat(t)):"list"===u?c.map((function(e){return(0,g.jsx)(_,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?I(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({checked:!(null===o||void 0===o||!o[e.id]),onChange:a},e),e.id)})):void 0}))})]})},R=t(6835),U=t(29),T=t(7794),F=t.n(T),A=t(1095),q=t(3598),G=(0,c.vJ)([".map-search-form{width:100%;}.popover-map-search-form{z-index:1000;}"]),Y=function(e){var r=e.onAddressSelect,t=(0,q.Su)().heatNetworkService,n=function(){var e=(0,U.Z)(F().mark((function e(n,o){var a,i,l,c,s,d;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,R.Z)(o,2),i=a[0],l=a[1],c={lat:l,lon:i},e.next=4,t.findByCoords(c);case 4:s=e.sent,d={networkDetails:s},r&&r(n,[l,i],d);case 7:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(G,{}),(0,g.jsx)(A.Z,{placeholder:"Rechercher une adresse",onAddressSelected:n,className:"map-search-form",popoverClassName:"popover-map-search-form"})]})},W={fuelOil:"Fioul collectif",gas:"Gaz collectif",wood:"Bois",electric:"Electrique",unknow:"Autre"},H={fuelOil:{color:"#c72e6e"},gas:{color:"#9c47e2"},wood:{color:"#ce7f17"},electric:{color:"#4cd362"},unknow:{color:"#818181"}},B={T:"Tertiaire",R:"R\xe9sidentiel",unknow:"Inconnu"},J={T:{color:"#13e0d6"},R:{color:"#136ce0"},unknow:{color:"#818181"}},X=[48.85294,2.34987],K={outline:!0,substation:!0,boilerRoom:!0,gasUsage:["R","T"],energy:["fuelOil","gas"]},V=[{id:"heat-network",entries:[{id:"outline",label:"R\xe9seaux de chaleur",className:"legend-heat-network"},{id:"boilerRoom",label:"Chaufferie",className:"legend-boiler-room"},{id:"substation",label:"Sous station",className:"legend-substation"}],type:"list"},"separator",{id:"energy",title:"Copropri\xe9t\xe9s\xa0: type de chauffage",entries:K.energy.map((function(e){return{id:e,label:(null===W||void 0===W?void 0:W[e])||W.unknow,bgColor:H[e].color,className:"legend-energy"}})),description:"Energy",type:"group"},{id:"gasUsage",title:"Consommations de gaz",entries:K.gasUsage.map((function(e){return{id:e,label:(null===B||void 0===B?void 0:B[e])||B.unknow,bgColor:J[e].color,className:"legend-energy"}})),description:"GasUsage",type:"group"}],Q={minZoomData:12.75,minZoom:4,maxZoom:22,defaultZoom:12,lng:X[1],lat:X[0],defaultLayerDisplay:K,legendData:V},$=t(5045);function ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function re(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ee(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var te=Q.minZoomData,ne=Q.maxZoom,oe="15px",ae=(0,c.vJ)([".map-wrap{position:relative;width:100%;height:calc( 100vh - "," - "," );}.map{position:absolute;width:100%;height:100%;}.maplibregl-control-container,.mapboxgl-control-container{> [class*=mapboxgl-]{z-index:",";}}.maplibregl-marker,.mapboxgl-marker{z-index:",";}.popover-map-search-form{z-index:"," !important;}.search-result-box{height:100%;overflow:auto;overflow-y:auto;overflow-y:overlay;overflow-x:visible;padding-bottom:6rem;mask-image:linear-gradient(180deg,transparent 0,black 0%),linear-gradient( 180deg,rgba(0,0,0,.3) 0,black ",",black calc(100% - ","),transparent 100% );mask-size:",",calc(100% - ",");mask-repeat:no-repeat,no-repeat;mask-position:right top,left top;}"],$.YG,$.Ji,1e4,1e4,10101,"3.5rem","7rem",oe,oe),ie=c.ZP.div.withConfig({displayName:"Mapstyle__MapControlWrapper",componentId:"sc-19llg5-0"})(["position:absolute;z-index:",";max-width:28%;width:100%;min-width:250px;padding:1rem;"," ",""],10100,(function(e){return e.bottom?(0,c.iv)(["bottom:0;"]):(0,c.iv)(["top:0;"])}),(function(e){return e.right?(0,c.iv)(["right:0;"]):(0,c.iv)(["left:0;"])})),le=c.ZP.div.withConfig({displayName:"Mapstyle__MapSearchResult",componentId:"sc-19llg5-1"})(["padding-top:3rem;"]),ce={type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#2d9748","line-width":3,"line-opacity":["interpolate",["linear"],["zoom"],11,.75,15,1]}},se={type:"fill",layout:{},paint:{"fill-color":"#ff00d4","fill-opacity":1}},de={type:"fill",layout:{},paint:{"fill-color":"#ff6600","fill-outline-color":"#ff6600","fill-opacity":["interpolate",["linear"],["zoom"],11,.75,15,.95]}},ue="nb_lot_habitation_bureau_commerce",fe=Object.entries({fioul:"fuelOil",fioul_domestique:"fuelOil",gaz:"gas",gaz_naturel:"gas",gaz_propane_butane:"gas",charbon:"wood",bois_de_chauffage:"wood",electricite:"electric",energie_autre:"unknow","sans objet":"unknow",default:"unknow"}).reduce((function(e,r){var t=(0,R.Z)(r,2),a=t[0],i=t[1];return re(re({},e),{},(0,n.Z)({},i,[].concat((0,o.Z)(e[i]||[]),[a])))}),{}),pe={fuelOil:{color:"#c72e6e"},gas:{color:"#9c47e2"},wood:{color:"#ce7f17"},electric:{color:"#4cd362"},unknow:{color:"#818181"}},me=[].concat((0,o.Z)(Object.entries(pe).flatMap((function(e){var r=(0,R.Z)(e,2),t=r[0],n=r[1];return[fe[t],n.color]}))),[pe.unknow.color]),ge={type:"circle",layout:{"circle-sort-key":["-",["coalesce",["get",ue],0]]},paint:{"circle-color":["match",["get","energie_utilisee"]].concat((0,o.Z)(me)),"circle-radius":["interpolate",["linear"],["zoom"],te+.1,["case",["<",["get",ue],100],4,["<",["get",ue],1e3],8,15],ne,["case",["<",["get",ue],100],8,["<",["get",ue],1e3],16,30]],"circle-opacity":["interpolate",["linear"],["zoom"],te+.2,0,te+.5+1,.65],"circle-stroke-opacity":0}},he="conso",be={T:{color:"#13e0d6"},R:{color:"#136ce0"},unknow:{color:"#818181"}},ve=[].concat((0,o.Z)(Object.entries(be).flatMap((function(e){var r=(0,R.Z)(e,2);return[r[0],r[1].color]}))),[be.unknow.color]),xe={type:"circle",layout:{"circle-sort-key":["-",["coalesce",["get",he],0]]},paint:{"circle-color":["match",["get","code_grand_secteur"]].concat((0,o.Z)(ve)),"circle-radius":["interpolate",["linear"],["zoom"],te+.1,["case",["<",["get",he],100],4,["<",["get",he],1e3],8,15],ne,["case",["<",["get",he],100],8,["<",["get",he],1e3],16,30]],"circle-opacity":["interpolate",["linear"],["zoom"],te+.2,0,te+.2+1,.25],"circle-stroke-opacity":0}};function ye(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function je(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ye(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ye(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var we=Q.defaultZoom,_e=Q.maxZoom,ke=Q.minZoom,Ne=Q.minZoomData,Ce=Q.lng,Le=Q.lat,Oe=Q.defaultLayerDisplay,Se=Q.legendData,Pe=["outline","substation","boilerRoom"],Ze=function(e){return"".concat(e.join("--"))};function ze(){var e=(0,l.useRef)(null),r=(0,l.useRef)(null),t=(0,l.useState)("pending"),a=t[0],c=t[1],s=(0,l.useState)(!1),d=s[0],u=s[1],f=(0,l.useState)([]),p=f[0],m=f[1],b=(0,l.useState)(Oe),v=b[0],x=b[1],y=function(e){var t=e.coordinates;r.current.flyTo({center:{lon:t[0],lat:t[1]},zoom:16})},j=function(e){var r;if(e.coordinates){var t=Ze(e.coordinates),n=p.filter((function(e){var r=e.coordinates;return Ze(r)!==t}));null===e||void 0===e||null===(r=e.marker)||void 0===r||r.remove(),m(n),u(!1)}};return(0,l.useEffect)((function(){"loaded"!==a&&(r.current=new(i().Map)({attributionControl:!1,container:e.current,style:"https://openmaptiles.geo.data.gouv.fr/styles/osm-bright/style.json",center:[Ce,Le],zoom:we,maxZoom:_e,minZoom:ke}),r.current.on("click",(function(){console.info("zoom =>",r.current.getZoom())})),r.current.on("load",(function(){console.info("useEffect1 mapState =>",a),console.info("setMapState =>","loaded"),c("loaded");var e=new(i().NavigationControl)({showCompass:!0,showZoom:!0,visualizePitch:!0});r.current.addControl(e,"top-left");var t=new(i().AttributionControl)({compact:!1});r.current.addControl(t,"bottom-right");var n=new(i().ScaleControl)({maxWidth:100,unit:"metric"});r.current.addControl(n,"bottom-left");var o=document.location.origin;r.current.addSource("heatNetwork",{type:"vector",tiles:["".concat(o,"/api/map/network/{z}/{x}/{y}")]}),r.current.addLayer(je({id:"outline",source:"heatNetwork","source-layer":"outline"},ce)),r.current.addLayer(je({id:"substation",source:"heatNetwork","source-layer":"substation"},se)),r.current.addLayer(je({id:"boilerRoom",source:"heatNetwork","source-layer":"boilerRoom"},de)),r.current.addSource("energy",{type:"vector",tiles:["".concat(o,"/api/map/energy/{z}/{x}/{y}")],maxzoom:_e,minzoom:Ne}),r.current.addLayer(je({id:"energy",source:"energy","source-layer":"condominiumRegister"},ge)),r.current.addSource("gasUsage",{type:"vector",tiles:["".concat(o,"/api/map/gas/{z}/{x}/{y}")],maxzoom:_e,minzoom:Ne}),r.current.addLayer(je({id:"gasUsage",source:"gasUsage","source-layer":"gasUsage"},xe))})))})),(0,l.useEffect)((function(){var e=!1,t=p.map((function(t){if(t.marker)return t;var n=new(i().Marker)({color:"#4550e5"}).setLngLat(t.coordinates).addTo(r.current);return e=!0,je({marker:n},t)}));e&&m(t)}),[d,p]),(0,l.useEffect)((function(){if("pending"!==a){Pe.forEach((function(e){return r.current.getLayer(e)?r.current.setLayoutProperty(e,"visibility",v[e]?"visible":"none"):console.info("Layer '".concat(e,"' is not set on map"))}));var e=v.energy.flatMap((function(e){return fe[e].map((function(e){return["==",["get","energie_utilisee"],e]}))}));console.info("energyFilter",["any"].concat((0,o.Z)(e))),r.current.setFilter("energy",["any"].concat((0,o.Z)(e)));var t=v.gasUsage.map((function(e){return["==",["get","code_grand_secteur"],e]}));console.info("gasUsageFilter",["any"].concat((0,o.Z)(t))),r.current.setFilter("gasUsage",["any"].concat((0,o.Z)(t)))}}),[v,a]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ae,{}),(0,g.jsxs)("div",{className:"map-wrap",children:[(0,g.jsx)(ie,{className:"search-result-box",right:!0,top:!0,children:(0,g.jsx)(le,{children:p.length>0&&p.map((function(e,r){return(0,g.jsx)(h,{result:e,onClick:y,onClickClose:j},"".concat(e.address,"-").concat(r))})).reverse()})}),(0,g.jsx)(ie,{right:!0,bottom:!0,children:(0,g.jsx)(D,{data:Se,onToogleFeature:function(e){var r;x(je(je({},v),{},(0,n.Z)({},e,null!==(r=!(null!==v&&void 0!==v&&v[e]))&&void 0!==r&&r)))},onToogleInGroup:function(e,r){switch(e){case"energy":!function(e){var r=new Set(v.energy);r.has(e)?r.delete(e):r.add(e),x(je(je({},v),{},{energy:Array.from(r)}))}(r);break;case"gasUsage":!function(e){var r=new Set(v.gasUsage);r.has(e)?r.delete(e):r.add(e),x(je(je({},v),{},{gasUsage:Array.from(r)}))}(r)}},layerDisplay:v,forceClosed:p.length>0})}),(0,g.jsx)(ie,{right:!0,top:!0,children:(0,g.jsx)(Y,{onAddressSelect:function(e,r,t){var n=[r[1],r[0]];console.info("onAddressSelectHandle =>",e,n,t);var a={date:Date.now()},i=Ze(n),l=p.find((function(e){return e.id===i}))||{id:i,coordinates:n,address:e,addressDetails:t,search:a};m([].concat((0,o.Z)(p.filter((function(e){var r=e.id;return"".concat(r)!==i}))),[l])),y({coordinates:n}),u(!0)}})}),(0,g.jsx)("div",{ref:e,className:"map"})]})]})}var Me=t(9008),Ee=c.ZP.div.withConfig({displayName:"carte__MapWrapper",componentId:"sc-jpv3g6-0"})(["min-height:calc(100vh - ",");@media (min-width:992px){height:calc(100vh - "," - ",");}"],$.EV,$.YG,$.Ji);var Ie=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Me.default,{children:(0,g.jsx)("title",{children:"Carte des r\xe9seaux : France Chaleur Urbaine"})}),(0,g.jsx)($.ZP,{currentMenu:"/carte",fullscreen:!0,children:(0,g.jsx)(Ee,{children:(0,g.jsx)(ze,{})})})]})}},5390:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/carte",function(){return t(5459)}])},6644:function(){},1664:function(e,r,t){e.exports=t(7942)}},function(e){e.O(0,[644,700,849,774,888,179],(function(){return r=5390,e(e.s=r);var r}));var r=e.O();_N_E=r}]);