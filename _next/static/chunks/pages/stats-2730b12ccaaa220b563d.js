(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{5670:function(e,n,r){"use strict";r.d(n,{Z:function(){return h}});var i=r(318),t=r(1455),s=(r(7294),r(9163)),o=s.ZP.section.withConfig({displayName:"Slicestyle__SliceSection",componentId:"sc-c4kejs-0"})(["",""],(function(e){switch(e.theme){case"color":return(0,s.iv)(["background-color:#4550e5;color:#fff;"]);case"grey":return(0,s.iv)(["background-color:#f9f8f6;"])}})),a=(0,s.iv)(["",""],(function(e){var n=e.bleedColors,r=e.bgWidth,i=void 0===r?0:r;return null!==n&&void 0!==n&&n[0]?"\n  linear-gradient(\n    to left,\n    transparent calc(50% + ".concat(i/2,"px - 80px),\n    ").concat(n[0]," calc(50% + ").concat(i/2,"px)\n  ),"):""})),l=(0,s.iv)(["",""],(function(e){var n=e.bleedColors,r=e.bgWidth,i=void 0===r?0:r;return null!==n&&void 0!==n&&n[1]?"\n  linear-gradient(\n    to right,\n    transparent calc(50% + ".concat(i/2,"px - 80px),\n    ").concat(n[1]," calc(50% + ").concat(i/2,"px)\n  ),"):""})),d=(0,s.iv)(["",""],(function(e){var n=e.bg;return n?"url(".concat(n,")"):""})),c=s.ZP.div.withConfig({displayName:"Slicestyle__SliceContainerWrapper",componentId:"sc-c4kejs-1"})(["max-width:100%;",";",";background-repeat:no-repeat;background-size:",";background-position:",";",""],(function(e){var n=e.bg,r=e.bleedColors;return n||r?(0,s.iv)(["background-image:"," "," ",";"],a,l,d):""}),(function(e){var n=e.bgColor;return n?(0,s.iv)(["background-color:",";"],n):""}),(function(e){return e.bgSize||"auto"}),(function(e){return e.bgPos||"center"}),(function(e){var n=e.bgWidth,r=void 0===n?0:n;return r&&(0,s.iv)(["background-size:",";background-position:left center;@media (min-width:","px){background-size:contain;background-position:center;}"],"cover",r)})),u=s.ZP.div.withConfig({displayName:"Slicestyle__SliceContainer",componentId:"sc-c4kejs-2"})(["max-width:78rem;.slice-header{text-align:center;padding:1.5rem 0 2rem;}"]),v=r(5893),h=function(e){var n=e.className,r=e.header,s=e.children,a=e.theme,l=e.padding,d=e.bg,h=e.bgPos,p=e.bgSize,f=e.bgWidth,x=e.bgColor,m=e.bleedColor,g=Array.isArray(m)?m:[m,m],b=(0,i.Z)(g,2),j=b[0],w=void 0===j?"":j,N=b[1],y=void 0===N?"":N;return(0,v.jsx)(o,{className:"fr-container--fluid ".concat(n),theme:a,children:(0,v.jsx)("div",{className:"fr-grid-row fr-grid-row--center",children:(0,v.jsx)(c,{className:"fr-col-lg-12 ".concat(l?"fr-py-".concat(l,"w"):""),bg:d,bgPos:h,bgSize:p,bgWidth:f,bgColor:x,bleedColors:[w,y],children:(0,v.jsxs)(u,{className:"fr-container",children:[r&&(0,v.jsx)("header",{children:(0,v.jsx)(t.Z,{value:r,className:"slice-header"})}),s]})})})})}},6380:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return C}});var i=r(318),t=r(3789),s=r(2809),o=r(6018),a=r(5670),l=r(7294),d=r(9163),c=d.ZP.div.withConfig({displayName:"TextListstyle__DataCard",componentId:"sc-1nbmwop-0"})(["display:flex;flex-direction:column;align-items:flex-start;padding:32px;overflow:visible;flex:1;"]),u=r(5893);var v=function(e){var n=e.data,r=void 0===n?[]:n;return(0,u.jsx)("div",{className:"fr-grid-row fr-grid-row--gutters",children:null===r||void 0===r?void 0:r.map((function(e,n){return(0,u.jsx)("div",{className:"fr-col-lg-3 fr-col-sm-6",children:(0,u.jsxs)(c,{children:[(0,u.jsx)("h2",{children:e.title}),(0,u.jsx)("div",{children:e.body})]})},"".concat(n,"-").concat(e.title))}))})},h=r(4486),p=r(9008),f=r(7385),x=r(821);function m(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function g(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){(0,s.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var b=d.ZP.div.withConfig({displayName:"stats__GraphWrapper",componentId:"sc-ryz84h-0"})(["width:100%;height:400px;"]),j=h.He.map((function(e){return{title:e.value,body:e.description}})),w=h.OO.map((function(e){return{title:e.value,body:e.description}})),N=["Jan","Fev","Mar","Avr","Mai","Juin","Juil","Aout","Sept","Oct","Nov","Dec"],y=function(e){return fetch(e).then((function(e){return e.json()}))};var C=function(){var e=(0,x.ZP)("/api/statistiques/getActions",y),n=e.data,r=e.error,d=(0,x.ZP)("/api/statistiques/getVisitsSummary",y),c=d.data,h=d.error;r&&console.warn("errorActions >>",r);var m=(0,l.useMemo)((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.result.values.map((function(e,r){return e.reduce((function(e,n){return g(g({},e),{},(0,s.Z)({},n.label,n))}),{filters:null===n||void 0===n?void 0:n.result.filters[r]})})).reverse())&&void 0!==e?e:[]}),[null===n||void 0===n?void 0:n.result]),C=m,_=m;h&&console.warn("errorVisits >>",h);var Z=(0,l.useMemo)((function(){var e;return null!==(e=null===c||void 0===c?void 0:c.result.values.map((function(e,n){return g({filters:c.result.filters[n]},e)})).reverse())&&void 0!==e?e:[]}),[null===c||void 0===c?void 0:c.result]),O=[["x","Visiteurs"]].concat((0,t.Z)(Z.map((function(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(null===r||void 0===r||null===(e=r.filters)||void 0===e||null===(n=e.date)||void 0===n?void 0:n.split("-"))||["YYYY","MM"],s=(0,i.Z)(t,2),o=s[0],a=s[1],l="".concat(isNaN(Number(a))?a:N[parseInt(a)-1]," ").concat(o);return[l,(null===r||void 0===r?void 0:r.nb_uniq_visitors)||0]})))),P=[["x","Total des tests","Adresse non \xe9ligibles","Adresse \xe9ligibles"]].concat((0,t.Z)(C.map((function(){var e,n,r,t,s,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(null===o||void 0===o||null===(e=o.filters)||void 0===e||null===(n=e.date)||void 0===n?void 0:n.split("-"))||["YYYY","MM"],l=(0,i.Z)(a,2),d=l[0],c=l[1],u="".concat(isNaN(Number(c))?c:N[Number(c)-1]," ").concat(d);return[u,(null===o||void 0===o||null===(r=o["Formulaire de test - Envoi"])||void 0===r?void 0:r.nb_visits)||0,(null===o||void 0===o||null===(t=o["Formulaire de test - Adresse In\xe9ligible"])||void 0===t?void 0:t.nb_visits)||0,(null===o||void 0===o||null===(s=o["Formulaire de test - Adresse \xc9ligible"])||void 0===s?void 0:s.nb_visits)||0]})))),A=[["x","Total des prises de contact","Contact pour adresse non \xe9ligibles","Contact pour adresse \xe9ligibles"]].concat((0,t.Z)(_.map((function(){var e,n,r,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(null===s||void 0===s||null===(e=s.filters)||void 0===e||null===(n=e.date)||void 0===n?void 0:n.split("-"))||["YYYY","MM"],a=(0,i.Z)(o,2),l=a[0],d=a[1],c="".concat(isNaN(Number(d))?d:N[Number(d)-1]," ").concat(l),u=(null===s||void 0===s||null===(r=s["Formulaire de contact \xe9ligible - Envoi"])||void 0===r?void 0:r.nb_visits)||0,v=(null===s||void 0===s||null===(t=s["Formulaire de contact in\xe9ligible - Envoi"])||void 0===t?void 0:t.nb_visits)||0,h=Number(u)+Number(v);return[c,h,v,u]}))));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.default,{children:(0,u.jsx)("title",{children:"Statistiques - France Chaleur Urbaine"})}),(0,u.jsx)(o.Z,{children:(0,u.jsx)("div",{className:"fr-container fr-mt-2w",children:(0,u.jsx)("div",{className:"fr-grid-row",children:(0,u.jsxs)("div",{className:"fr-col-12",children:[(0,u.jsx)("h2",{children:"Statistiques"}),(0,u.jsxs)("ul",{children:[(0,u.jsx)("li",{children:"Ouverture nationale de la plateforme\xa0: juillet 2021"}),(0,u.jsx)("li",{children:"Mise en place des mesures statistiques automatis\xe9es\xa0: d\xe9cembre 2021"}),(0,u.jsx)("li",{children:"Fr\xe9quence de mise \xe0 jour des statistiques automatis\xe9es\xa0: Mensuelle"})]}),(0,u.jsx)("p",{}),(0,u.jsx)("h3",{children:"Nombre de visiteurs"}),(0,u.jsx)(b,{children:h?(0,u.jsx)("div",{children:"Erreur lors du chargement des donn\xe9es statistique, veuillez nous excuser et re-essayer plus tard."}):Z&&O?(0,u.jsx)(f.Z,{height:"400px",chartType:"LineChart",loader:(0,u.jsx)("div",{children:"Loading Chart"}),data:O,options:{legend:"none",colors:["#0078f3","#f60700","#1f8d49"],hAxis:{slantedText:!0,slantedTextAngle:30},vAxis:{title:"Visiteurs",viewWindow:{min:-50}},animation:{startup:!0,easing:"out",duration:500}},rootProps:{"data-testid":"1"}}):"Chargement des donn\xe9es..."}),(0,u.jsx)("p",{}),(0,u.jsx)("h3",{children:"Adresses test\xe9es"}),(0,u.jsx)("p",{children:(0,u.jsx)("em",{children:"Les adresses test\xe9es avant d\xe9cembre 2021 n\u2019\xe9tant pas comptabilis\xe9es de fa\xe7on automatis\xe9e, elles ne sont pas affich\xe9es sur ce graphique. Cependant, une solution permettant d\u2019exposer ces donn\xe9es est en cours d\u2019\xe9tude."})}),(0,u.jsx)(b,{children:r?(0,u.jsx)("div",{children:"Erreur lors du chargement des donn\xe9es statistique, veuillez nous excuser et re-essayer plus tard."}):C?(0,u.jsx)(f.Z,{height:"400px",chartType:"LineChart",loader:(0,u.jsx)("div",{children:"Loading Chart"}),data:P,options:{colors:["#0078f3","#f60700","#1f8d49","#009099"],hAxis:{slantedText:!0,slantedTextAngle:30},vAxis:{viewWindow:{min:-8}},animation:{startup:!0,easing:"out",duration:500}},rootProps:{"data-testid":"2"}}):"Chargement des donn\xe9es..."}),(0,u.jsx)("p",{}),(0,u.jsx)("h3",{children:"Demandes de contacts"}),(0,u.jsx)("p",{children:(0,u.jsx)("em",{children:"Les demandes de contacts effectu\xe9es avant d\xe9cembre 2021 n\u2019\xe9tant pas comptabilis\xe9es de fa\xe7on automatis\xe9e, elles ne sont pas affich\xe9es sur ce graphique. Cependant, une solution permettant d\u2019exposer ces donn\xe9es est en cours d\u2019\xe9tude."})}),(0,u.jsx)("p",{children:(0,u.jsxs)("em",{children:[(0,u.jsx)("strong",{children:"Donn\xe9es ant\xe9rieures \xe0 d\xe9cembre 2021\xa0:"}),(0,u.jsx)("br",{}),(0,u.jsx)("strong",{children:"Nombre de demandes de contacts\xa0:"}),(0,u.jsx)("span",{children:"\xa0\u2022 juillet\xa0:\xa02 "}),(0,u.jsx)("span",{children:"\xa0\u2022 septembre\xa0:\xa05 "}),(0,u.jsx)("span",{children:"\xa0\u2022 octobre\xa0:\xa06 "}),(0,u.jsx)("span",{children:"\xa0\u2022 novembre\xa0:\xa04 "})]})}),(0,u.jsx)(b,{children:r?(0,u.jsx)("div",{children:"Erreur lors du chargement des donn\xe9es statistique, veuillez nous excuser et re-essayer plus tard."}):_?(0,u.jsx)(f.Z,{height:"400px",chartType:"LineChart",loader:(0,u.jsx)("div",{children:"Loading Chart"}),data:A,options:{colors:["#0078f3","#f60700","#1f8d49"],hAxis:{slantedText:!0,slantedTextAngle:30},vAxis:{viewWindow:{min:-.08},gridlines:{multiple:1},minorGridlines:{multiple:.25}},animation:{startup:!0,easing:"out",duration:500}},rootProps:{"data-testid":"3"}}):"Chargement des donn\xe9es..."}),(0,u.jsx)("p",{}),(0,u.jsx)("h3",{children:"Taux de conversion d\u2019un chauffage fossile vers les r\xe9seaux de chaleur"}),(0,u.jsx)(a.Z,{padding:0,children:(0,u.jsx)(v,{data:w})}),(0,u.jsx)("p",{}),(0,u.jsx)("h3",{children:"\xc0 propos des r\xe9seaux de chaleur"}),(0,u.jsx)("div",{children:(0,u.jsx)("em",{children:"Source : SNCU, Enqu\xeate annuelle sur les r\xe9seaux de chaleur et de froid 2021"})}),(0,u.jsx)(a.Z,{padding:0,children:(0,u.jsx)(v,{data:j})}),(0,u.jsx)("p",{})]})})})})]})}},1013:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stats",function(){return r(6380)}])}},function(e){e.O(0,[774,681,617,451,340,888,179],(function(){return n=1013,e(e.s=n);var n}));var n=e.O();_N_E=n}]);